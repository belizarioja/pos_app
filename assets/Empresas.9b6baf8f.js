import{_ as C,aj as T,r,N as f,k as Q,al as z,t,m as o,q as l,y as u,z as _,B as c,w as p,Q as b,x as d,am as g,A as U,a3 as v,az as h,au as m}from"./index.379e16fb.js";import{Q as k,a as A}from"./QTable.d0631cdf.js";import{Q as P}from"./QPage.d25ede10.js";import{C as y}from"./ClosePopup.e5ad9c3d.js";import{a as V}from"./axios.7331a07d.js";import"./QList.114f449d.js";import"./QSelect.4378271f.js";import"./QItem.d392d2f2.js";import"./format.3ff8b525.js";const E="https://posapi-test.factura-smart.com/",j=T({name:"IndexPage",setup(){return{modalUpdEstatus:r(!1),tokenfacturacion:r(""),rows:r([]),cols:[{name:"rif",align:"center",label:"Rif",field:"rif"},{name:"empresa",align:"center",label:"Raz\xF3n Social",field:"empresa"},{name:"direccion",align:"center",label:"Direcci\xF3n",field:"direccion"},{name:"telefono",align:"left",label:"Tel\xE9fono",field:"telefono"},{name:"email",align:"left",label:"Email",field:"email"},{name:"token",align:"left",label:"Token",field:"token"},{name:"url",align:"left",label:"Url Integraci\xF3n",field:"url"},{name:"tasabcv",align:"left",label:"Tasa BCV",field:"tasabcv"},{name:"estatus",align:"left",label:"Estatus",field:"estatus"},{name:"accion",align:"left",label:"Accion",field:"accion"}],filterTable:r(""),idUpd:r(""),buscaritem:r(!1),detalleventa:r({}),loading:r(!1),viewtoken:r(!1),modalEdit:r(!1),pagination:{page:1,rowsPerPage:20}}},methods:{btnviewtoken(e){console.log(e),this.razonsocialtitulo=e.empresa,this.riftitulo=e.rif,this.tokenservicios=e.token,this.viewtoken=!0},openEdit(e){console.log(e),this.idUpd=e.cod,this.tasabcv=e.tasabcv,this.tokenfacturacion=e.token,this.urlfacturacion=e.url,this.empresa=e.empresa,this.rif=e.rif,this.direccion=e.direccion,this.telefono=e.telefono,this.email=e.email,this.modalEdit=!0},guardar(){const e={empresa:this.empresa||"",email:this.email||"",telefono:this.telefono||"",direccion:this.direccion||"",rif:this.rif||"",urlfacturacion:this.urlfacturacion||"",tasabcv:this.tasabcv||0,tokenfacturacion:this.tokenfacturacion||""};V.put(E+"configuracion/"+this.idUpd,e).then(async a=>{if(console.log(a.status),a.status===200){const i=a.data.resp;console.log(i),f.create(i),this.modalEdit=!1,this.listar()}}).catch(a=>{f.create("Problemas al actualizar Configuracion "+a)})},btnOpenUpdEstatus(e){console.log(e),this.idUpd=e.cod,this.messageActualizar=e.estatus==="1"?"desactivar":"activar",this.estatusAct=e.estatus,this.modalUpdEstatus=!0},actualizarEstatus(){const e={estatus:this.estatusAct==="1"?0:1};V.put(E+"sede/estatus/"+this.idUpd,e).then(async a=>{if(a.status===200){const i=a.data.resp;console.log(i),f.create(i),this.modalUpdEstatus=!1,this.listar()}})},listar(){this.btndisable=!1,V.get(E+"sede").then(async e=>{const a=e.data.data;this.rows=[];for(const i in a){const n={};n.cod=a[i].id,n.rif=a[i].rif,n.empresa=a[i].empresa,n.direccion=a[i].direccion,n.email=a[i].email,n.token=a[i].tokenfacturacion,n.url=a[i].urlfacturacion,n.telefono=a[i].telefono,n.tasabcv=a[i].tasabcv,n.estatus=a[i].estatus,this.rows.push(n)}}).catch(e=>{f.create("Problemas al listar Emisores "+e)})}},mounted(){console.log("Listar emisores"),this.listar()}}),B={class:"col"},$=o("div",{class:"botones row",style:{background:"#ededed"}},[o("div",{class:"text-h6"},"M\xF3dulo de Emisores")],-1),D={class:"listarcategorias row"},N={class:"listarcategoriasconitem col"},I={class:"row justify-center"},q={style:{display:"inline"}},S={class:"q-ml-sm"},R={style:{}},O=o("div",{class:"text-h6"},"Editar Emisor",-1),F={class:"row justify-around"},M={class:"row justify-around"},G={class:"row justify-around"},H={class:"row justify-around"},L=o("div",{class:"text-h6",style:{"text-align":"center"}},"Actualizar Estatus",-1),J={style:{display:"flex","justify-content":"space-evenly","margin-top":"20px"}};function K(e,a,i,n,W,X){return Q(),z(P,{class:"bg-white row"},{default:t(()=>[o("div",B,[$,o("div",D,[o("div",N,[o("div",I,[l(A,{dense:"",rows:e.rows,title:"Emisores",columns:e.cols,"row-key":"num",pagination:e.pagination,style:{width:"95%","margin-top":"20px"},loading:e.loading,filter:e.filterTable,"no-data-label":"No hay registros!"},{"top-left":t(()=>[l(u,{dense:"",debounce:"300",color:"primary",modelValue:e.filterTable,"onUpdate:modelValue":a[0]||(a[0]=s=>e.filterTable=s),placeholder:"Buscar"},{append:t(()=>[l(_,{name:"search"})]),_:1},8,["modelValue"])]),"top-right":t(()=>[o("div",q,[l(c,{"icon-right":"add_business",class:"q-ml-sm col-md-4 col-sm-3 col-xs-3",color:"secondary",label:"Crear Emisor",onClick:a[1]||(a[1]=s=>e.drawerFilters=!0)})])]),"body-cell-token":t(s=>[l(k,{props:s},{default:t(()=>[o("div",null,[l(c,{icon:"visibility",onClick:p(w=>e.btnviewtoken(s.row),["stop"]),dense:"",flat:""},null,8,["onClick"])])]),_:2},1032,["props"])]),"body-cell-accion":t(s=>[l(k,{props:s},{default:t(()=>[o("div",null,[l(c,{color:"primary",icon:"app_registration",onClick:p(w=>e.openEdit(s.row),["stop"]),dense:""},null,8,["onClick"])])]),_:2},1032,["props"])]),"body-cell-estatus":t(s=>[l(k,{props:s},{default:t(()=>[o("div",null,[l(c,{color:s.row.estatus==="1"?"secondary":"negative",icon:s.row.estatus==="1"?"toggle_on":"toggle_off",onClick:p(w=>e.btnOpenUpdEstatus(s.row),["stop"]),dense:""},null,8,["color","icon","onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","loading","filter"])])])])]),l(h,{modelValue:e.viewtoken,"onUpdate:modelValue":a[2]||(a[2]=s=>e.viewtoken=s),persistent:""},{default:t(()=>[l(b,{style:{width:"auto"}},{default:t(()=>[l(d,{class:"row items-center"},{default:t(()=>[o("span",S,"Token del Cliente Emisor "+g(e.razonsocialtitulo+" - "+e.riftitulo),1)]),_:1}),l(d,{class:"row items-center",style:{"word-break":"break-all"}},{default:t(()=>[o("div",R,g(e.tokenservicios),1)]),_:1}),l(U,{align:"right"},{default:t(()=>[v(l(c,{label:"Aceptar",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:e.modalEdit,"onUpdate:modelValue":a[11]||(a[11]=s=>e.modalEdit=s),persistent:""},{default:t(()=>[l(b,{class:"col-md-6 col-sm-11 col-xs-11",style:{"margin-top":"20px"}},{default:t(()=>[l(d,{class:"row"},{default:t(()=>[O]),_:1}),l(m,{class:"row"}),l(d,null,{default:t(()=>[o("div",F,[l(u,{class:"col-md-3 col-sm-12 col-xs-12",filled:"",modelValue:e.tasabcv,"onUpdate:modelValue":a[3]||(a[3]=s=>e.tasabcv=s),label:"Tasa BCV","stack-label":"",dense:"",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),l(u,{class:"col-md-8 col-sm-12 col-xs-12",filled:"",modelValue:e.urlfacturacion,"onUpdate:modelValue":a[4]||(a[4]=s=>e.urlfacturacion=s),label:"Url facturaci\xF3n","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),l(m,{class:"row"}),l(d,null,{default:t(()=>[o("div",M,[l(u,{class:"col-md-3 col-sm-12 col-xs-12",filled:"",modelValue:e.rif,"onUpdate:modelValue":a[5]||(a[5]=s=>e.rif=s),label:"RIF","stack-label":"",dense:"",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),l(u,{class:"col-md-8 col-sm-12 col-xs-12",filled:"",modelValue:e.empresa,"onUpdate:modelValue":a[6]||(a[6]=s=>e.empresa=s),label:"Raz\xF3n Social","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),l(m,{class:"row"}),l(d,null,{default:t(()=>[o("div",G,[l(u,{class:"col-md-5 col-sm-12 col-xs-12",filled:"",modelValue:e.telefono,"onUpdate:modelValue":a[7]||(a[7]=s=>e.telefono=s),label:"Tel\xE9fono","stack-label":"",dense:"",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),l(u,{class:"col-md-6 col-sm-12 col-xs-12",filled:"",modelValue:e.email,"onUpdate:modelValue":a[8]||(a[8]=s=>e.email=s),label:"Email","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),l(m,{class:"row"}),l(d,null,{default:t(()=>[o("div",H,[l(u,{class:"col-12",filled:"",modelValue:e.direccion,"onUpdate:modelValue":a[9]||(a[9]=s=>e.direccion=s),label:"Direcci\xF3n","stack-label":"",dense:"",style:{"margin-bottom":"10px"}},null,8,["modelValue"])])]),_:1}),l(m),l(d,null,{default:t(()=>[l(u,{modelValue:e.tokenfacturacion,"onUpdate:modelValue":a[10]||(a[10]=s=>e.tokenfacturacion=s),label:"Token facturaci\xF3n",filled:"",dense:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(m),l(U,{align:"right"},{default:t(()=>[v(l(c,{label:"Cerrar",color:"negative"},null,512),[[y]]),l(c,{label:"Guardar",color:"secondary",onClick:e.guardar},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:e.modalUpdEstatus,"onUpdate:modelValue":a[12]||(a[12]=s=>e.modalUpdEstatus=s),persistent:""},{default:t(()=>[l(b,{style:{width:"250px"}},{default:t(()=>[l(d,null,{default:t(()=>[L]),_:1}),l(d,{class:"q-pt-none"},{default:t(()=>[o("div",null," \xBFDesea "+g(e.messageActualizar)+" este usuario? ",1)]),_:1}),l(d,{class:"q-pt-none"},{default:t(()=>[o("div",J,[v(l(c,{color:"negative",label:"Cancelar"},null,512),[[y]]),l(c,{color:"secondary",label:"Aceptar",onClick:e.actualizarEstatus},null,8,["onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ie=C(j,[["render",K]]);export{ie as default};
