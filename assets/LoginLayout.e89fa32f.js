import{c as T,r as F,p as N,o as A,a as L,d as M,h as l,e as R,g as D,v as U,s as B,n as j,f as z,i as O,u as H,j as K,_ as Y,N as _,k as G,l as J,m as a,w as W,q as u,t as f,Q as X,x as Z,y as P,z as Q,A as $,B as ee,C as te,D as oe,E as b}from"./index.38cdac20.js";import{a as ae}from"./axios.7331a07d.js";var se=T({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:n,emit:p}){const y=D(),r=F(null);let c=0;const s=[];function x(t){const m=typeof t=="boolean"?t:e.noErrorFocus!==!0,h=++c,q=(o,i)=>{p("validation"+(o===!0?"Success":"Error"),i)},V=o=>{const i=o.validate();return typeof i.then=="function"?i.then(d=>({valid:d,comp:o}),d=>({valid:!1,comp:o,err:d})):Promise.resolve({valid:i,comp:o})};return(e.greedy===!0?Promise.all(s.map(V)).then(o=>o.filter(i=>i.valid!==!0)):s.reduce((o,i)=>o.then(()=>V(i).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return h===c&&q(!0),!0;if(h===c){const{comp:i,err:d}=o[0];if(d!==void 0&&console.error(d),q(!1,i),m===!0){const k=o.find(({comp:E})=>typeof E.focus=="function"&&U(E.$)===!1);k!==void 0&&k.comp.focus()}}return!1})}function S(){c++,s.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function C(t){t!==void 0&&B(t);const m=c+1;x().then(h=>{m===c&&h===!0&&(e.onSubmit!==void 0?p("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function w(t){t!==void 0&&B(t),p("reset"),j(()=>{S(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){z(()=>{if(r.value===null)return;const t=r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),m=>m.tabIndex>-1);t!=null&&t.focus({preventScroll:!0})})}N(O,{bindComponent(t){s.push(t)},unbindComponent(t){const m=s.indexOf(t);m>-1&&s.splice(m,1)}});let I=!1;return A(()=>{I=!0}),L(()=>{I===!0&&e.autofocus===!0&&v()}),M(()=>{e.autofocus===!0&&v()}),Object.assign(y.proxy,{validate:x,resetValidation:S,submit:C,reset:w,focus:v,getValidationComponents:()=>s}),()=>l("form",{class:"q-form",ref:r,onSubmit:C,onReset:w},R(n.default))}});const re=[l("g",{transform:"translate(20 50)"},[l("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.6"},[l("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),l("g",{transform:"translate(50 50)"},[l("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.8"},[l("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),l("g",{transform:"translate(80 50)"},[l("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.9"},[l("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var ne=T({name:"QSpinnerFacebook",props:H,setup(e){const{cSize:n,classes:p}=K(e);return()=>l("svg",{class:p.value,width:n.value,height:n.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},re)}});const ie="https://posapi-test.factura-smart.com/",le={name:"LoginLayout",data(){return{term:"",usuarioCentro:"",claveCentro:"",loading:!1}},methods:{submit(){this.usuarioCentro===""?_.create("El Usuario es requerido para iniciar sesi\xF3n"):this.claveCentro===""?_.create("La contrase\xF1a es requerida para iniciar sesi\xF3n"):(this.loading=!0,ae.post(ie+"usuario/login",{usuario:this.usuarioCentro,clave:this.claveCentro}).then(async e=>{this.loading=!1,e.status===200?(sessionStorage.setItem("id_usuario",e.data.resp.id),sessionStorage.setItem("tx_nombre",e.data.resp.nombre),sessionStorage.setItem("tx_empresa",e.data.resp.empresa),sessionStorage.setItem("co_empresa",e.data.resp.idempresa),sessionStorage.setItem("tx_rol",e.data.resp.rol),sessionStorage.setItem("co_rol",e.data.resp.idrol),this.$router.push("/puntodeventa")):(this.loading=!1,_.create(e.data.message))}).catch(e=>{this.loading=!1,_.create("Error "+e)}))}},mounted(){console.log("Modo producci\xF3n")}},g=e=>(te("data-v-32d33e52"),e=e(),oe(),e),ue={class:"full-height full-width q-pa-md p-0 no-scroll-y"},ce={class:"row q-col-gutter-md full-height"},de=g(()=>a("div",{class:"left-image col-12 col-md-7 flex flex-center column"},[a("h4",{class:"text-left q-mb-md slogan"},[b(" Te ofrecemos la plataforma "),a("span",{class:"text-resaltado"},"m\xE1s f\xE1cil, segura y confiable"),b(" del mercado. ")]),a("img",{src:"img/logo_smart.avif",alt:"Peque\xF1a Imagen",class:"small-image q-mt-md"})],-1)),me={class:"col-12 col-md-5 bg-color-yellow flex flex-center"},fe={class:"center-form q-pa-md"},pe=g(()=>a("h5",{class:"titulo"},[b("\xA1Bienvenido a Smart "),a("br"),a("b",null,"proSales"),b("!")],-1)),ge=g(()=>a("h6",{class:"p-0"},[a("b",null,"Iniciar sesi\xF3n")],-1)),ve=g(()=>a("hr",null,null,-1)),he=g(()=>a("img",{src:"img/logo-prosales.png",alt:"Logo",class:"img-logo q-mx-auto"},null,-1));function _e(e,n,p,y,r,c){return G(),J("div",ue,[a("div",ce,[de,a("div",me,[a("div",fe,[pe,a("form",{onSubmit:n[2]||(n[2]=W((...s)=>c.submit&&c.submit(...s),["prevent"])),class:"form-width"},[u(X,{bordered:"",class:"q-pa-lg custom-shadow custom-border-radius"},{default:f(()=>[ge,u(Z,null,{default:f(()=>[u(se,{class:"q-gutter-md"},{default:f(()=>[u(P,{outlined:"",clearable:"",modelValue:r.usuarioCentro,"onUpdate:modelValue":n[0]||(n[0]=s=>r.usuarioCentro=s),type:"text",label:"Usuario"},{prepend:f(()=>[u(Q,{name:"account_circle"})]),_:1},8,["modelValue"]),u(P,{outlined:"",clearable:"",modelValue:r.claveCentro,"onUpdate:modelValue":n[1]||(n[1]=s=>r.claveCentro=s),type:"password",label:"Clave"},{prepend:f(()=>[u(Q,{name:"lock"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),u($,{class:"q-px-md"},{default:f(()=>[u(ee,{"no-caps":"",unelevated:"",class:"gradient-btn full-width",type:"submit",loading:r.loading,size:"lg",label:"Ingresar"},{loading:f(()=>[u(ne)]),_:1},8,["loading"])]),_:1}),ve,he]),_:1})],32)])])])])}var Se=Y(le,[["render",_e],["__scopeId","data-v-32d33e52"]]);export{Se as default};
