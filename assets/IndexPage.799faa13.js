import{_ as S,aj as M,r,N as f,k as u,al as v,t as n,m as e,q as a,x as m,at as C,am as l,au as h,av as B,aw as O,Q as N,B as p,z,l as k,ax as T,ay as E,y as I,an as w,A as F,a3 as A,az as x,aA as $}from"./index.aba143e8.js";import{Q as j}from"./QBadge.224e8b6c.js";import{Q as U,C as P}from"./ClosePopup.a7cc1708.js";import{Q as H,a as V}from"./QItem.1d482576.js";import{Q as L}from"./QSelect.4e25f8e6.js";import{Q as R}from"./QPage.8e94c73d.js";import{a as y}from"./axios.7331a07d.js";import{h as Q}from"./moment.40bc58bf.js";import"./format.a0fe48fe.js";const b="https://posapi-test.factura-smart.com/",Y=M({name:"IndexPage",setup(){return{slide:r(2),buscadoproducto:r(!0),btnDisableAnular:r(!0),numerointernoanular:r(""),modalanular:r(!1),empresa:r(""),direccion:r(""),rif:r(""),telefono:r(""),email:r(""),igtf:r(0),numerointerno:r(""),idventa:r(""),textitem:r(""),subtotal:r(0),impuesto:r(0),descuento:r(0),total:r(0),subtotalusd:r(0),impuestousd:r(0),descuentousd:r(0),totalusd:r(0),nombrecliente:r(""),correocliente:r(""),telefonocliente:r(""),direccioncliente:r(""),idclienteventa:r(""),nombreclienteventa:r(""),documentoabrev:r(""),documentoclientesolo:r(""),documentoclienteventa:r(""),fechahoy:r(Q().format("DD/MM/YYYY")),fechaholds:r(""),idhold:r(""),iditemhold:r(""),buscaritem:r(!1),modalrealizarventa:r(!1),noencontrado:r(!1),clientebuscado:r(!1),facturabuscado:r(!1),encontrado:r(!1),modalcliente:r(!1),dsbBtnCrearCliente:r(!0),modeldocumento:r(null),modaldeleteholds:r(!1),modaldetalleinvoice:r(!1),optionsdocumento:[],rowsproductos:[],rowsproductosfiltre:[],holds:[],ventas:[],ventasanular:[],detalleventa:{},detalleventaanular:{},tasausd:r(0),idusuario:r(sessionStorage.getItem("id_usuario"))}},methods:{fechaDetalle(t){return Q(t).format("DD/MM/YYYY HH:mm:ss")},abrirBuscarFactura(){this.detalleventaanular={},this.numerointernoanular="",this.idUpd="",this.facturabuscado=!1,this.btnDisableAnular=!0,this.modalanular=!0},async anularDocumento(){const t={idventa:this.idUpd};await y.post(b+"ventas/anularventa",t).then(async s=>{console.log(s),this.modalanular=!1,f.create("Documento ANULADO con \xE9xito")})},async buscarFactura(){this.detalleventaanular={},this.ventasanular=[],this.facturabuscado=!1,this.idtipofacturaanular=1,await y.get(b+"ventas/getventanumerointerno/"+sessionStorage.getItem("co_empresa")+"/"+this.idtipofacturaanular+"/"+this.numerointernoanular).then(async t=>{console.log(this.numerointernoanular),console.log(t),t.status===200?(this.detalleventaanular=t.data.resp,this.idUpd=this.detalleventaanular.id,this.ventasanular=t.data.respdetalles,this.facturabuscado=!0,this.btnDisableAnular=this.detalleventaanular.estatus==="2"||!1):(f.create("Documento NO ENCONTRADO"),this.facturabuscado=!1,this.btnDisableAnular=!0,this.idUpd="")})},async abrirDetalleInvoive(){const t=this;this.detalleventa={},await y.get(b+"ventas/getventa/"+this.idventa).then(async s=>{this.detalleventa=s.data.resp,await y.get(b+"ventas/getitemsventas/"+this.idventa).then(async i=>{t.ventas=[],console.log(i);const d=i.data.resp;for(const c in d){const _=d[c];t.ventas.push(_)}t.deleteHolds(2),t.modaldetalleinvoice=!0}).catch(i=>{f.create("Problemas al listar items Ventas "+i)}),console.log(this.detalleventa)})},async actualizarCantidad(t,s){const i=document.getElementById("cantidad"+t.idproducto);s===1?(i.value=Number(i.value)+1,this.subtotal=(Number(this.subtotal)+t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+(Number(t.precio)+t.precio*t.tasa/100)).toFixed(2)):(i.value>1&&(this.subtotal=(Number(this.subtotal)-t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)-t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)-(Number(t.precio)+t.precio*t.tasa/100)).toFixed(2)),i.value=i.value<=1?1:Number(i.value)-1),t.total=(Number(t.precio)+t.precio*t.tasa/100)*i.value,console.log("this.tasausd"),console.log(this.tasausd),this.subtotalusd=(this.subtotal/this.tasausd).toFixed(2),this.impuestousd=(this.impuesto/this.tasausd).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2);const d=await this.updItemHolds(t.iditemhold,i.value,i.value*(Number(t.precio)+t.precio*t.tasa/100),t.idproducto,s);d?await this.calcularMonto(t):(console.log("resp input false"),console.log(d),i.value=i.value<=1?1:Number(i.value)-1)},calcularMonto(t){const s=document.getElementById("cantidad"+t.idproducto);if(s){const i=s.value>0?s.value:1;this.holds.map(d=>(d.cod===t.cod&&(d.monto=(d.precio*d.tasa/100+d.precio)*i,t.monto=d.monto,d.cantidad=i),d)),document.getElementById("monto"+t.idproducto).innerHTML="Bs."+t.monto.toFixed(2)}},async updItemHolds(t,s,i,d,c){const _={idproducto:d,iditemhold:t,cantidad:s,accion:c,total:i},o=await y.post(b+"ventas/upditemholds",_);return console.log(o.status),o.status===202?(this.$q.dialog({title:"Ooops! "+o.data.resp,message:" Contacte al administrador del sistema.",html:!0,ok:{color:"primary",label:"Aceptar"}}),!1):!0},openDeleteHolds(){this.modaldeleteholds=!0},deleteHolds(t){const s={idhold:this.idhold,accion:t};y.post(b+"ventas/deleteholds",s).then(async i=>{this.modaldeleteholds=!1,this.listarHolds()}).catch(i=>{f.create("Problemas al ELIMINAR Hold de venta "+i)})},deleteItemHolds(t){const s={iditemhold:t.iditemhold,idproducto:t.idproducto,cantidad:t.cantidad};this.$q.dialog({title:"Eliminar Item!",message:"\xBFDesea eliminar este item?",html:!0,ok:{color:"secondary",label:"S\xED"},cancel:{color:"negative",label:"No"},persistent:!0}).onOk(()=>{y.post(b+"ventas/deleteitemholds",s).then(async i=>{console.log(i.data.success),this.nombrecliente="",this.listarHolds()}).catch(i=>{f.create("Problemas al ELIMINAR itemhold de venta "+i)})})},async additemholds(t){const s=this.descuento;let i=!1;const d=this.holds.findIndex(c=>c.idproducto===t.idproducto);if(d===-1){const c=t.precio*t.tasa/100+t.precio,_={idhold:this.idhold,idproducto:t.idproducto,precio:t.precio,cantidad:1,tasa:t.tasa,total:c,idunidad:t.idunidad,descuento:s};await y.post(b+"ventas/setitemholds",_).then(async o=>{const D=o.data.resp;if(o.data.success){const g={};g.idhold=this.idhold,g.iditemhold=D.iditemhold,g.idproducto=t.idproducto,g.precio=t.precio,g.cantidad=1,g.tasa=t.tasa,g.total=c,g.producto=t.producto,g.categoria=t.categoria,g.descripcion=t.descripcion,g.descuento=s,this.subtotal=(Number(this.subtotal)+g.precio*g.cantidad).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+c).toFixed(2),this.holds.push(g),i=!0}else this.buscaritem=!1,this.slide=2}).catch(o=>{f.create("Problemas al crear itemhold de venta "+o)})}else{this.holds[d].cantidad=Number(this.holds[d].cantidad)+1;const c=t.precio*t.tasa/100+t.precio;document.getElementById("monto"+t.idproducto).innerHTML="Bs."+(c*this.holds[d].cantidad).toFixed(2),this.subtotal=(Number(this.subtotal)+t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+c).toFixed(2),i=await this.updItemHolds(this.holds[d].iditemhold,this.holds[d].cantidad,c*this.holds[d].cantidad,t.idproducto,1)}i&&(this.subtotalusd=(this.subtotal/this.tasausd).toFixed(2),this.impuestousd=(this.impuesto/this.tasausd).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2),this.buscaritem=!1,this.slide=2)},listarProductos(){y.get(b+"productos/"+sessionStorage.getItem("co_empresa")+"/"+0).then(async s=>{const i=s.data.resp;this.rowsproductos=[];for(const d in i){const c={};c.idproducto=i[d].id,c.sku=i[d].sku,c.producto=i[d].producto,c.id=i[d].id,c.categoria=i[d].categoria,c.descripcion=i[d].descripcion,c.unidad=i[d].unidad,c.idunidad=i[d].idunidad,c.impuesto=i[d].impuesto,c.precio=i[d].precio,c.inventario=Number(i[d].inventario1),c.costo=i[d].costo,c.tasa=i[d].tasa,this.rowsproductos.push(c)}this.rowsproductosfiltre=this.rowsproductos}).catch(s=>{f.create("Problemas al listar Categorias "+s)})},abrirRealizarVenta(){this.listarHolds(),this.modalrealizarventa=!0},realizarVenta(){const t=this,s={idhold:this.idhold,tasausd:this.tasausd,totalusd:this.totalusd,idempresa:sessionStorage.getItem("co_empresa")};y.post(b+"ventas/setventa",s).then(async i=>{const d=i.data;d.success&&(t.idventa=d.resp.idventa,t.abrirDetalleInvoive())}).catch(i=>{f.create("Problemas al crear hold de venta "+i)}),this.modalrealizarventa=!1},abrirBuscarItem(){this.nombrecliente.length===0?(console.log("Debe buscar cliente"),this.abrirBuscarCliente()):(this.buscaritem=!0,this.textitem="")},abrirBuscarCliente(){this.modalcliente=!0,this.documento="",console.log(this.optionsdocumento[0]),this.modeldocumento=this.optionsdocumento[0],this.limpiarCliente()},limpiarCliente(){this.nombrecliente="",this.telefonocliente="",this.correocliente="",this.direccioncliente="",this.noencontrado=!1,this.encontrado=!1,this.clientebuscado=!1,this.dsbBtnCrearCliente=!0},listarTiposDocumentos(){y.get(b+"tipodocumento").then(async t=>{const s=t.data.data;this.optionsdocumento=[];for(const i in s){const d={};d.cod=s[i].id,d.tipodocumento=s[i].tipodocumento,d.abrev=s[i].abrev,this.optionsdocumento.push(d)}}).catch(t=>{f.create("Problemas al listar Tipos "+t)})},buscarCliente(){if(this.limpiarCliente(),!this.modeldocumento){f.create("Debe seleccionar TIPO DOCUMENTO");return}if(this.documento.length===0){f.create("Debe agregar DOCUMENTO");return}const t={idtipodocumento:this.modeldocumento.cod,documento:this.documento};y.post(b+"clientes/buscar",t).then(async s=>{const i=s.data.resp;i.length>0?(this.idcliente=i[0].id,this.nombrecliente=i[0].nombre,this.telefonocliente=i[0].telefono,this.correocliente=i[0].correo,this.direccioncliente=i[0].direccion,this.noencontrado=!1,this.encontrado=!0):(this.noencontrado=!0,this.encontrado=!1),this.clientebuscado=!0,this.dsbBtnCrearCliente=!1}).catch(s=>{f.create("Problemas al buscar cliente "+s)})},crearCliente(){if(!this.modeldocumento){f.create("Debe seleccionar TIPO DOCUMENTO");return}if(this.documento.length===0){f.create("Debe agregar DOCUMENTO");return}if(this.nombrecliente.length===0){f.create("Debe agregar NOMBRE");return}if(this.encontrado)this.modalcliente=!1,this.idclienteventa=this.idcliente,this.nombreclienteventa=this.nombrecliente,this.documentoclienteventa=this.modeldocumento.abrev+" "+this.documento,this.crearHolds(this.idcliente,this.idusuario);else{const t={idtipodocumento:this.modeldocumento.cod,documento:this.documento,nombre:this.nombrecliente,telefono:this.telefonocliente,correo:this.correocliente,direccion:this.direccioncliente};y.post(b+"clientes/crear",t).then(async s=>{const i=s.data.resp;i&&(this.modalcliente=!1,this.idclienteventa=i,this.nombreclienteventa=this.nombrecliente,this.documentoclienteventa=this.modeldocumento.abrev+" "+this.documento,this.crearHolds(i,this.idusuario))}).catch(s=>{f.create("Problemas al crear cliente "+s)})}},crearHolds(t,s){const d={idcliente:t,idusuario:s,idtipofactura:1};y.post(b+"ventas/setholds",d).then(async c=>{const _=c.data.resp;_&&(this.idhold=_.idhold,this.fechaholds=_.fecha)}).catch(c=>{f.create("Problemas al crear hold de venta "+c)})},async listarHolds(){this.nombrecliente="",await y.get(b+"ventas/gethols/"+sessionStorage.getItem("id_usuario")).then(async t=>{const s=t.data.resp.length>0?t.data.resp[0]:null;console.log(s),this.holds=[],this.slide=1,this.subtotal=0,this.impuesto=0,this.total=0,s&&(this.idcliente=s.idcliente,this.nombrecliente=s.nombre,this.documentoabrev=s.abrev,this.documentoclienteventa=s.abrev+" "+s.documento,this.documentoclientesolo=s.documento,this.idhold=s.idhold,this.fechaholds=Q(s.fecha).format("DD/MM/YYYY"),await y.get(b+"ventas/getitemshols/"+this.idhold).then(async i=>{this.holds=i.data.resp;for(const d in this.holds){const c=this.holds[d],_=c.precio*c.cantidad,o=_*c.tasa/100,D=o+_;this.subtotal=(Number(this.subtotal)+_).toFixed(2),this.impuesto=(Number(this.impuesto)+o).toFixed(2),this.total=(Number(this.total)+D).toFixed(2)}this.slide=this.holds.length>0?2:1}).catch(i=>{f.create("Problemas al listar items Holds "+i)})),this.subtotalusd=(this.subtotal/this.tasa).toFixed(2),this.impuestousd=(this.impuesto/this.tasa).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2)}).catch(t=>{f.create("Problemas al listar Holds "+t)})},primeraletra(t){return t[0]},colorLetra(t){const s=t[0].charCodeAt(0);return"#"+s+"0"},async cargar(){const t=await y.get(b+"configuracion/"+sessionStorage.getItem("co_empresa")).catch(s=>{f.create("Problemas al listar Configuracion "+s)});return console.log(t),t.data.resp}},watch:{textitem(t){console.log("textitem"),console.log(t),this.buscadoproducto=!1,t.length>0?this.rowsproductosfiltre=this.rowsproductos.filter(s=>!!(s.producto.toUpperCase().includes(t.toUpperCase())||s.sku&&s.sku.includes(t))):this.rowsproductosfiltre=this.rowsproductos,this.buscadoproducto=!0,this.rowsproductosfiltre=this.rowsproductosfiltre.slice().reverse(),console.log(this.rowsproductosfiltre)}},async mounted(){const t=await this.cargar();this.tasausd=t.tasabcv,this.empresa=t.empresa,this.rif=t.rif,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,console.log("this.tasausd"),console.log(this.tasausd),await this.listarTiposDocumentos(),await this.listarHolds(),await this.listarProductos()}}),G={class:"col",style:{}},q={class:"row"},X={class:"totales col-md-6 col-sm-12 col-xs-12"},K={style:{width:"100%",background:"#ddd","border-radius":"7px",display:"flex","justify-content":"space-between",padding:"3px 10px"}},J={style:{color:"#000213"}},W={style:{color:"blue","margin-left":"5PX"}},Z={style:{color:"#000213"}},tt={style:{color:"blue","margin-left":"5PX"}},et=e("span",null,"Subtotal:",-1),at=e("span",null,"Impuesto:",-1),st=e("span",null,"Descuento:",-1),ot={class:"itemtotal"},lt={class:"itemtotal"},it={class:"col-md-6 col-sm-12 col-xs-12",style:{display:"-webkit-box","align-items":"center"}},nt={class:"botones row"},dt={class:"puntodeventa row"},rt={key:1,class:"puntodeventaconitem col"},ct={class:"row justify-center"},ut={style:{display:"flex"}},ht={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},pt=e("div",{class:"text-center"},"Cantidad",-1),mt=["id","value","onInput"],ft={style:{display:"grid",width:"25%","justify-content":"center"}},yt={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},bt=e("div",{class:"text-center"},"%Imp.",-1),_t={class:"text-secondary"},gt={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},vt=e("div",{class:"text-center"},"Monto",-1),Ct=["id"],wt={class:""},kt={style:{display:"flex"}},Nt={style:{display:"flex"}},Dt={style:{display:"flex"}},Vt={style:{display:"grid",width:"48%","font-size":"11px","justify-content":"center"}},It=e("div",{class:"text-center"},"Unidad",-1),Bt={class:"text-secondary"},zt={style:{display:"grid",width:"48%","font-size":"11px","justify-content":"center"}},Ft=e("div",{class:"text-center"},"Impuesto.",-1),At={class:"text-secondary"},xt=e("div",{class:"text-h6"},"Buscar cliente",-1),Pt={class:""},Tt={class:"row"},Et={key:0,class:"noencontrado"},Ut={key:1,class:"encontrado"},Ht=e("div",{class:"text-h6",style:{"margin-left":"10px"}},"Eliminar Venta",-1),Ot=e("div",{class:"encontrado"}," \xBFDesea eliminar esta venta? ",-1),jt=e("div",{class:"text-h6",style:{"margin-left":"10px"}}," Realizar esta venta?",-1),Qt={style:{width:"100%"}},St=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),Mt={style:{"font-weight":"bold"}},$t={style:{"font-weight":"bold"}},Lt=e("td",null,"Fecha:",-1),Rt={style:{"font-weight":"bold"}},Yt={style:{width:"100%"}},Gt=e("tr",{style:{"font-weight":"bold"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cantidad"),e("td",{class:"rayafactura rayaarriba"},"Tasa %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),qt=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),Xt={style:{width:"100%"}},Kt={class:"letratotalesfactura"},Jt=e("td",{style:{width:"50%"}},null,-1),Wt=e("td",null,"Subtotal Bs.:",-1),Zt={class:"letratotalesfactura"},te=e("td",null,null,-1),ee=e("td",null,"Impuestos Bs.:",-1),ae={class:"letratotalesfactura"},se=e("td",null,null,-1),oe=e("td",null,"Descuentos Bs.:",-1),le={class:"letratotalesfactura"},ie=e("td",null,null,-1),ne=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),de={class:"rayafactura"},re={class:"letratotalesfactura",style:{"font-weight":"bold"}},ce=e("td",null,null,-1),ue=e("td",null,"Total Bs.:",-1),he={class:"letratotalesfactura",style:{"font-weight":"bold"}},pe=e("td",null,null,-1),me=e("td",null,"Total $:",-1),fe={class:"text-center letratotalesfactura",style:{}},ye={class:"text-center letratotalesfactura",style:{}},be={class:"text-center letratotalesfactura",style:{}},_e={class:"text-center letratotalesfactura",style:{}},ge={style:{display:"flex","align-items":"left",width:"100%"}},ve={class:"numero",style:{"margin-left":"10px"}},Ce={class:"numero",style:{"margin-left":"10px"}},we={style:{display:"flex","align-items":"center"}},ke=e("div",{class:"control",style:{"margin-left":"10px"}}," N\xB0 de control:",-1),Ne={class:"control",style:{"margin-left":"10px"}},De={style:{width:"100%"}},Ve={class:"letratotalesfactura"},Ie=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),Be={style:{"font-weight":"bold"}},ze={class:"letratotalesfactura"},Fe={style:{"font-weight":"bold"}},Ae={class:"letratotalesfactura"},xe=e("td",null,"Fecha:",-1),Pe={style:{"font-weight":"bold"}},Te={class:"letratotalesfactura"},Ee=e("td",null,"Cajero:",-1),Ue={style:{"font-weight":"bold"}},He={style:{width:"100%"}},Oe=e("tr",{style:{"font-weight":"bold","font-size":"11px"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cant."),e("td",{class:"rayafactura rayaarriba"},"Imp %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),je={style:{"text-align":"right"}},Qe=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),Se={style:{width:"100%"}},Me={class:"letratotalesfactura"},$e=e("td",{style:{width:"40%"}},null,-1),Le=e("td",null,"Subtotal Bs.:",-1),Re={style:{"text-align":"right"}},Ye={class:"letratotalesfactura"},Ge=e("td",null,null,-1),qe=e("td",null,"Impuestos Bs.:",-1),Xe={style:{"text-align":"right"}},Ke={class:"letratotalesfactura"},Je=e("td",null,null,-1),We=e("td",null,"Descuentos Bs.:",-1),Ze={style:{"text-align":"right"}},ta={class:"letratotalesfactura"},ea=e("td",null,null,-1),aa=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),sa={class:"rayafactura",style:{"text-align":"right"}},oa={class:"letratotalesfactura",style:{"font-weight":"bold"}},la=e("td",null,null,-1),ia=e("td",null,"Total Bs.:",-1),na={style:{"text-align":"right"}},da={class:"letratotalesfactura",style:{"font-weight":"bold"}},ra=e("td",null,null,-1),ca=e("td",null,"Total $:",-1),ua={style:{"text-align":"right"}},ha=e("div",{class:"text-h6",style:{"margin-left":"10px"}}," Anular Documento",-1),pa={class:"row"},ma={style:{display:"flex","align-items":"left",width:"100%"}},fa={class:"numero",style:{"margin-left":"10px"}},ya={class:"numero",style:{"margin-left":"10px"}},ba={style:{display:"flex","align-items":"center"}},_a=e("div",{class:"control",style:{"margin-left":"10px"}}," N\xB0 de control:",-1),ga={class:"control",style:{"margin-left":"10px"}},va={style:{width:"100%"}},Ca={class:"letratotalesfactura"},wa=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),ka={style:{"font-weight":"bold"}},Na={class:"letratotalesfactura"},Da={style:{"font-weight":"bold"}},Va={class:"letratotalesfactura"},Ia=e("td",null,"Fecha:",-1),Ba={style:{"font-weight":"bold"}},za={class:"letratotalesfactura"},Fa=e("td",null,"Cajero:",-1),Aa={style:{"font-weight":"bold"}},xa={style:{width:"100%"}},Pa=e("tr",{style:{"font-weight":"bold","font-size":"11px"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cant."),e("td",{class:"rayafactura rayaarriba"},"Imp %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),Ta={style:{"text-align":"right"}},Ea=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),Ua={style:{width:"100%"}},Ha={class:"letratotalesfactura"},Oa=e("td",{style:{width:"40%"}},null,-1),ja=e("td",null,"Subtotal Bs.:",-1),Qa={style:{"text-align":"right"}},Sa={class:"letratotalesfactura"},Ma=e("td",null,null,-1),$a=e("td",null,"Impuestos Bs.:",-1),La={style:{"text-align":"right"}},Ra={class:"letratotalesfactura"},Ya=e("td",null,null,-1),Ga=e("td",null,"Descuentos Bs.:",-1),qa={style:{"text-align":"right"}},Xa={class:"letratotalesfactura"},Ka=e("td",null,null,-1),Ja=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),Wa={class:"rayafactura",style:{"text-align":"right"}},Za={class:"letratotalesfactura",style:{"font-weight":"bold"}},ts=e("td",null,null,-1),es=e("td",null,"Total Bs.:",-1),as={style:{"text-align":"right"}},ss={class:"letratotalesfactura",style:{"font-weight":"bold"}},os=e("td",null,null,-1),ls=e("td",null,"Total $:",-1),is={style:{"text-align":"right"}};function ns(t,s,i,d,c,_){return u(),v(R,{class:"bg-coral"},{default:n(()=>[e("div",G,[e("div",q,[e("div",X,[a(N,{class:"my-card",bordered:"",style:{margin:"10px"}},{default:n(()=>[a(m,{style:{padding:"7px 16px"}},{default:n(()=>[e("div",K,[e("span",J,[C("Cliente: "),e("span",W,l(t.nombrecliente.length>0?t.nombrecliente:"GENERAL"),1)]),e("span",Z,[C("Fecha venta: "),e("span",tt,l(t.nombrecliente.length>0?t.fechaholds:t.fechahoy),1)])])]),_:1}),a(h),a(m,{horizontal:""},{default:n(()=>[a(m,{class:"column",style:{padding:"7px","font-size":"12px","align-items":"center"}},{default:n(()=>[e("span",null,"BCV Bs. "+l(t.tasausd||"0.00"),1),a(B,{"text-color":"white",style:O("background: "+t.colorLetra(t.nombrecliente.toUpperCase()||"GENERAL"))},{default:n(()=>[C(l(t.primeraletra(t.nombrecliente.toUpperCase()||"GENERAL")),1)]),_:1},8,["style"]),a(j,{color:"blue",style:{"margin-top":"5px"}},{default:n(()=>[C(l(t.documentoclienteventa||"GENERAL"),1)]),_:1})]),_:1}),a(h,{vertical:""}),a(m,{style:{display:"grid",padding:"7px 16px","font-size":"12px",width:"140px"}},{default:n(()=>[et,at,st,e("span",ot,"$ "+l(t.totalusd),1)]),_:1}),a(h,{vertical:""}),a(m,{style:{display:"grid",padding:"7px 16px","font-size":"12px"}},{default:n(()=>[e("span",null,"Bs. "+l(t.subtotal),1),e("span",null,"Bs. "+l(t.impuesto),1),e("span",null,"Bs. "+l(t.descuento),1),e("span",lt,"Bs. "+l(t.total),1)]),_:1})]),_:1})]),_:1})]),e("div",it,[e("div",nt,[a(p,{class:"col-6",color:"primary",icon:"zoom_in",onClick:t.abrirBuscarItem,label:"Agregar item",style:{"font-size":"12px"}},null,8,["onClick"]),a(p,{class:"col-6",color:"secondary","icon-right":"paid",onClick:t.abrirRealizarVenta,label:"Realizar venta",style:{"font-size":"12px"},disable:t.holds.length<=0},null,8,["onClick","disable"]),a(p,{class:"col-6",color:"negative",icon:"cancel",onClick:t.openDeleteHolds,label:"Cancelar venta",style:{"font-size":"12px"},disable:t.holds.length<=0},null,8,["onClick","disable"]),a(p,{class:"col-6",color:"positive","icon-right":"person_add_alt",onClick:t.abrirBuscarCliente,label:"Agregar cliente",style:{"font-size":"12px"}},null,8,["onClick"]),a(p,{class:"col-6",color:"dark",icon:"cancel_presentation",onClick:t.abrirBuscarFactura,label:"Anular",style:{"font-size":"12px"}},null,8,["onClick"]),a(p,{class:"col-6",color:"grey","icon-right":"assignment_return",onClick:t.abrirBuscarFactura,label:"Devoluciones",style:{"font-size":"12px"},disable:!0},null,8,["onClick"])])])]),e("div",dt,[t.slide===1?(u(),v(z,{key:0,class:"carritofondo",name:"remove_shopping_cart"})):(u(),k("div",rt,[e("div",ct,[(u(!0),k(T,null,E(t.holds,o=>(u(),v(N,{key:o,class:"my-card tarjetaitem col-md-5 col-sm-11 col-xs-11",style:{height:"fit-content"}},{default:n(()=>[a(H,{horizontal:""},{default:n(()=>[a(V,null,{default:n(()=>[a(U,null,{default:n(()=>[C(l(o.producto),1)]),_:2},1024),a(U,{caption:""},{default:n(()=>[C(l(o.categoria),1)]),_:2},1024)]),_:2},1024),a(V,{side:""},{default:n(()=>[a(p,{flat:"",round:"",color:"red",icon:"delete",onClick:D=>t.deleteItemHolds(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),a(H,{horizontal:""},{default:n(()=>[a(V,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:n(()=>[a(B,{"text-color":"white",style:O("background: "+t.colorLetra(o.producto))},{default:n(()=>[C(l(t.primeraletra(o.producto)),1)]),_:2},1032,["style"]),a(j,{color:"blue",style:{"margin-top":"5px"}},{default:n(()=>[C(" Bs "+l(o.precio),1)]),_:2},1024)]),_:2},1024),a(V,{class:"tarjeticainside"},{default:n(()=>[e("div",ut,[e("div",ht,[pt,e("input",{class:"inputCantidad",id:"cantidad"+o.idproducto,value:o.cantidad,onInput:D=>t.calcularMonto(o)},null,40,mt)]),e("div",ft,[a(p,{class:"btncantidad",color:"blue","icon-right":"add_circle",onClick:D=>t.actualizarCantidad(o,1),style:{"margin-bottom":"7px"}},null,8,["onClick"]),a(p,{class:"btncantidad",color:"red",icon:"remove_circle",onClick:D=>t.actualizarCantidad(o,2)},null,8,["onClick"])]),e("div",yt,[bt,e("div",_t,l(o.tasa),1)]),e("div",gt,[vt,e("div",{id:"monto"+o.idproducto,class:"text-secondary text-center"},"Bs. "+l(o.total),9,Ct)])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]))])]),a(x,{modelValue:t.buscaritem,"onUpdate:modelValue":s[2]||(s[2]=o=>t.buscaritem=o),position:"top"},{default:n(()=>[a(N,{style:{background:"#ddd",width:"350px"}},{default:n(()=>[a(m,{style:{padding:"10px 15px 7px"}},{default:n(()=>[e("div",wt,[a(I,{color:"white","bg-color":"primary",rounded:"",standout:"","bottom-slots":"",modelValue:t.textitem,"onUpdate:modelValue":s[1]||(s[1]=o=>t.textitem=o),label:"Nombre o Sku de producto",counter:"",autofocus:""},{prepend:n(()=>[a(z,{name:"search"})]),append:n(()=>[a(z,{name:"close",onClick:s[0]||(s[0]=o=>t.textitem=""),class:"cursor-pointer"})]),hint:n(()=>[C(" Cantidad de letras ")]),_:1},8,["modelValue"])])]),_:1}),a(h),t.buscadoproducto?(u(),v(m,{key:0,style:{"max-height":"64vh"},class:"scroll"},{default:n(()=>[(u(!0),k(T,null,E(t.rowsproductosfiltre,o=>(u(),v(N,{key:o.id,class:"my-card tarjetaitem"},{default:n(()=>[a(H,{horizontal:""},{default:n(()=>[a(V,null,{default:n(()=>[a(U,null,{default:n(()=>[C(l(o.producto),1)]),_:2},1024),a(U,null,{default:n(()=>[C("SKU "+l(o.sku),1)]),_:2},1024),a(U,{caption:""},{default:n(()=>[C(l(o.categoria),1)]),_:2},1024)]),_:2},1024),a(V,{side:""},{default:n(()=>[e("div",kt,[a(p,{flat:"",round:"",color:"blue",icon:"add_shopping_cart",onClick:D=>t.additemholds(o)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),a(H,{horizontal:""},{default:n(()=>[a(V,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:n(()=>[a(B,{"text-color":"white",style:O("background: "+t.colorLetra(o.producto))},{default:n(()=>[C(l(t.primeraletra(o.producto)),1)]),_:2},1032,["style"]),a(j,{color:"blue",style:{"margin-top":"5px"}},{default:n(()=>[C(" Bs. "+l(o.precio),1)]),_:2},1024)]),_:2},1024),a(V,{class:"tarjeticainside"},{default:n(()=>[e("div",Nt,l(o.descripcion),1),e("div",Dt,[e("div",Vt,[It,e("div",Bt,l(o.unidad),1)]),e("div",zt,[Ft,e("div",At,l(o.impuesto),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(x,{modelValue:t.modalcliente,"onUpdate:modelValue":s[9]||(s[9]=o=>t.modalcliente=o),position:"top"},{default:n(()=>[a(N,{style:{"max-height":"87vh"}},{default:n(()=>[a(m,null,{default:n(()=>[xt]),_:1}),a(h),a(m,{style:{padding:"0 15px"}},{default:n(()=>[e("div",Pt,[a(L,{filled:"",modelValue:t.modeldocumento,"onUpdate:modelValue":s[3]||(s[3]=o=>t.modeldocumento=o),options:t.optionsdocumento,"option-label":"tipodocumento","option-value":"cod",label:"Seleccione tipo documento",dense:""},null,8,["modelValue","options"])])]),_:1}),a(h),a(m,{style:{padding:"10px 15px"}},{default:n(()=>[e("div",Tt,[a(I,{class:"col-10",filled:"",modelValue:t.documento,"onUpdate:modelValue":s[4]||(s[4]=o=>t.documento=o),label:"Documento","stack-label":"",autofocus:""},null,8,["modelValue"]),a(p,{class:"col-2",icon:"search",color:"secondary",onClick:t.buscarCliente},null,8,["onClick"])])]),_:1}),t.noencontrado?(u(),k("div",Et," CLIENTE NO ENCONTRADO ")):w("",!0),t.encontrado?(u(),k("div",Ut," CLIENTE ENCONTRADO ")):w("",!0),t.clientebuscado?(u(),v(h,{key:2})):w("",!0),t.clientebuscado?(u(),v(m,{key:3,style:{padding:"0 15px"}},{default:n(()=>[a(I,{filled:"",modelValue:t.nombrecliente,"onUpdate:modelValue":s[5]||(s[5]=o=>t.nombrecliente=o),label:"Nombre cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:4})):w("",!0),t.clientebuscado?(u(),v(m,{key:5,style:{padding:"0 15px"}},{default:n(()=>[a(I,{filled:"",modelValue:t.correocliente,"onUpdate:modelValue":s[6]||(s[6]=o=>t.correocliente=o),label:"Email cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:6})):w("",!0),t.clientebuscado?(u(),v(m,{key:7,style:{padding:"0 15px"}},{default:n(()=>[a(I,{filled:"",modelValue:t.telefonocliente,"onUpdate:modelValue":s[7]||(s[7]=o=>t.telefonocliente=o),label:"Tel\xE9fono cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:8})):w("",!0),t.clientebuscado?(u(),v(m,{key:9,style:{padding:"0 15px"}},{default:n(()=>[a(I,{filled:"",modelValue:t.direccioncliente,"onUpdate:modelValue":s[8]||(s[8]=o=>t.direccioncliente=o),label:"Direcci\xF3n cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cancelar",color:"negative",onClick:t.limpiarCliente},null,8,["onClick"]),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:t.crearCliente,disable:t.dsbBtnCrearCliente},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(x,{modelValue:t.modaldeleteholds,"onUpdate:modelValue":s[11]||(s[11]=o=>t.modaldeleteholds=o),persistent:""},{default:n(()=>[a(N,{style:{}},{default:n(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:n(()=>[a(B,{color:"primary","text-color":"white"},{default:n(()=>[a(z,{name:"delete"})]),_:1}),Ht]),_:1}),a(h),a(m,{style:{}},{default:n(()=>[Ot]),_:1}),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cancelar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:s[10]||(s[10]=o=>t.deleteHolds(1))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(x,{modelValue:t.modalrealizarventa,"onUpdate:modelValue":s[12]||(s[12]=o=>t.modalrealizarventa=o),persistent:""},{default:n(()=>[a(N,{style:{}},{default:n(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:n(()=>[a(B,{color:"primary","text-color":"white"},{default:n(()=>[a(z,{name:"shopping_cart_checkout"})]),_:1}),jt]),_:1}),a(h),a(m,null,{default:n(()=>[e("table",Qt,[e("tr",null,[St,e("td",Mt,l(t.nombrecliente),1)]),e("tr",null,[e("td",null,l(t.documentoabrev)+":",1),e("td",$t,l(t.documentoclientesolo),1)]),e("tr",null,[Lt,e("td",Rt,l(t.fechaholds),1)])]),e("table",Yt,[Gt,(u(!0),k(T,null,E(t.holds,o=>(u(),k("tr",{key:o},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",null,l(o.total),1)]))),128)),qt]),e("table",Xt,[e("tr",Kt,[Jt,Wt,e("td",null,l(t.subtotal),1)]),e("tr",Zt,[te,ee,e("td",null,l(t.impuesto),1)]),e("tr",ae,[se,oe,e("td",null,l(t.descuento),1)]),e("tr",le,[ie,ne,e("td",de,l(t.igtf),1)]),e("tr",re,[ce,ue,e("td",null,l(t.total),1)]),e("tr",he,[pe,me,e("td",null,l(t.totalusd),1)])])]),_:1}),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cancelar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:t.realizarVenta},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(x,{modelValue:t.modaldetalleinvoice,"onUpdate:modelValue":s[13]||(s[13]=o=>t.modaldetalleinvoice=o),persistent:""},{default:n(()=>[a(N,{style:{width:"320px"}},{default:n(()=>[a(m,{style:{"justify-content":"center"}},{default:n(()=>[e("div",fe,l(t.empresa)+" - "+l(t.rif),1),e("div",ye,l(t.direccion),1),e("div",be,l(t.telefono),1),e("div",_e,l(t.email),1),a(h,{style:{margin:"10px 0px"}}),e("div",ge,[e("div",ve,l(t.detalleventa.tipofactura),1),e("div",Ce,l(t.detalleventa.numerointerno),1)]),e("div",we,[ke,e("div",Ne,l(t.detalleventa.numerocontrol),1)]),a(h,{style:{margin:"10px 0px"}}),e("table",De,[e("tr",Ve,[Ie,e("td",Be,l(t.detalleventa.nombrecliente),1)]),e("tr",ze,[e("td",null,l(t.detalleventa.abrev),1),e("td",Fe,l(t.detalleventa.documento),1)]),e("tr",Ae,[xe,e("td",Pe,l(t.fechaDetalle(t.detalleventa.fecha)),1)]),e("tr",Te,[Ee,e("td",Ue,l(t.detalleventa.usuario),1)])]),e("table",He,[Oe,(u(!0),k(T,null,E(t.ventas,o=>(u(),k("tr",{key:o,style:{"font-size":"11px"}},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",je,l(o.subtotal),1)]))),128)),Qe]),e("table",Se,[e("tr",Me,[$e,Le,e("td",Re,l(t.detalleventa.subtotal),1)]),e("tr",Ye,[Ge,qe,e("td",Xe,l(t.detalleventa.impuesto),1)]),e("tr",Ke,[Je,We,e("td",Ze,l(t.detalleventa.descuentos),1)]),e("tr",ta,[ea,aa,e("td",sa,l(t.detalleventa.igtf),1)]),e("tr",oa,[la,ia,e("td",na,l(t.detalleventa.total),1)]),e("tr",da,[ra,ca,e("td",ua,l(t.detalleventa.totalusd),1)])])]),_:1}),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]]),a(p,{label:"Imprimir",color:"secondary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(x,{modelValue:t.modalanular,"onUpdate:modelValue":s[15]||(s[15]=o=>t.modalanular=o),persistent:""},{default:n(()=>[a(N,{style:{width:"320px"}},{default:n(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:n(()=>[a(B,{color:"primary","text-color":"white"},{default:n(()=>[a(z,{name:"cancel_presentation"})]),_:1}),ha]),_:1}),a(h),a(m,{style:{"justify-content":"center"}},{default:n(()=>[e("div",pa,[a(I,{class:"col-10",filled:"",modelValue:t.numerointernoanular,"onUpdate:modelValue":s[14]||(s[14]=o=>t.numerointernoanular=o),label:"N\xFAmero Interno","stack-label":"",autofocus:""},null,8,["modelValue"]),a(p,{class:"col-2",icon:"search",color:"secondary",onClick:t.buscarFactura},null,8,["onClick"])])]),_:1}),a(h),t.facturabuscado?(u(),v(m,{key:0,style:{"justify-content":"center"}},{default:n(()=>[e("div",{class:$(t.detalleventaanular.estatus==="1"?"procesada":"anulada"),style:{display:"flex","justify-content":"center","align-items":"center",width:"100%"}},l(t.detalleventaanular.estatus==="1"?"PROCESADA":"ANULADA"),3),e("div",ma,[e("div",fa,l(t.detalleventaanular.tipofactura),1),e("div",ya,l(t.detalleventaanular.numerointerno),1)]),e("div",ba,[_a,e("div",ga,l(t.detalleventaanular.numerocontrol),1)]),a(h,{style:{margin:"10px 0px"}}),e("table",va,[e("tr",Ca,[wa,e("td",ka,l(t.detalleventaanular.nombrecliente),1)]),e("tr",Na,[e("td",null,l(t.detalleventaanular.abrev),1),e("td",Da,l(t.detalleventaanular.documento),1)]),e("tr",Va,[Ia,e("td",Ba,l(t.fechaDetalle(t.detalleventaanular.fecha)),1)]),e("tr",za,[Fa,e("td",Aa,l(t.detalleventaanular.usuario),1)])]),e("table",xa,[Pa,(u(!0),k(T,null,E(t.ventasanular,o=>(u(),k("tr",{key:o,style:{"font-size":"11px"}},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",Ta,l(o.subtotal),1)]))),128)),Ea]),e("table",Ua,[e("tr",Ha,[Oa,ja,e("td",Qa,l(t.detalleventaanular.subtotal),1)]),e("tr",Sa,[Ma,$a,e("td",La,l(t.detalleventaanular.impuesto),1)]),e("tr",Ra,[Ya,Ga,e("td",qa,l(t.detalleventaanular.descuentos),1)]),e("tr",Xa,[Ka,Ja,e("td",Wa,l(t.detalleventaanular.igtf),1)]),e("tr",Za,[ts,es,e("td",as,l(t.detalleventaanular.total),1)]),e("tr",ss,[os,ls,e("td",is,l(t.detalleventaanular.totalusd),1)])])]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:n(()=>[A(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",disable:t.btnDisableAnular,onClick:t.anularDocumento},null,8,["disable","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var bs=S(Y,[["render",ns]]);export{bs as default};
