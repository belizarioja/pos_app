import{_ as Q,ah as M,r,N as f,k as u,aj as v,t as i,m as e,q as a,x as m,ar as C,ak as l,as as h,at as V,au as S,Q as N,B as p,z,l as k,av as T,aw as U,y as D,al as w,A as F,a3 as x,ax as A,ay as $}from"./index.ff7428e5.js";import{Q as O}from"./QBadge.5929b60c.js";import{Q as H,C as P}from"./ClosePopup.33959ee2.js";import{Q as E,a as B}from"./QItem.f4989903.js";import{Q as R}from"./QSelect.c266bff4.js";import{Q as L}from"./QPage.5e147bb7.js";import{a as y}from"./axios.7331a07d.js";import{h as j}from"./moment.40bc58bf.js";import"./format.68127358.js";const _="https://posapi-test.factura-smart.com/",Y=M({name:"IndexPage",setup(){return{slide:r(2),buscadoproducto:r(!0),btnDisableAnular:r(!0),numerointernoanular:r(""),modalanular:r(!1),empresa:r(""),direccion:r(""),rif:r(""),telefono:r(""),email:r(""),igtf:r(0),numerointerno:r(""),idventa:r(""),textitem:r(""),subtotal:r(0),impuesto:r(0),descuento:r(0),total:r(0),subtotalusd:r(0),impuestousd:r(0),descuentousd:r(0),totalusd:r(0),nombrecliente:r(""),correocliente:r(""),telefonocliente:r(""),direccioncliente:r(""),idclienteventa:r(""),nombreclienteventa:r(""),documentoabrev:r(""),documentoclientesolo:r(""),documentoclienteventa:r(""),fechahoy:r(j().format("DD/MM/YYYY")),fechaholds:r(""),idhold:r(""),iditemhold:r(""),buscaritem:r(!1),modalrealizarventa:r(!1),noencontrado:r(!1),clientebuscado:r(!1),facturabuscado:r(!1),encontrado:r(!1),modalcliente:r(!1),dsbBtnCrearCliente:r(!0),modeldocumento:r(null),modaldeleteholds:r(!1),modaldetalleinvoice:r(!1),optionsdocumento:[],rowsproductos:[],rowsproductosfiltre:[],holds:[],ventas:[],ventasanular:[],detalleventa:{},detalleventaanular:{},tasausd:r(0),idusuario:r(sessionStorage.getItem("id_usuario"))}},methods:{fechaDetalle(t){return j(t).format("DD/MM/YYYY HH:mm:ss")},abrirBuscarFactura(){this.detalleventaanular={},this.numerointernoanular="",this.idUpd="",this.facturabuscado=!1,this.btnDisableAnular=!0,this.modalanular=!0},async anularDocumento(){const t={idventa:this.idUpd};await y.post(_+"ventas/anularventa",t).then(async s=>{console.log(s),this.modalanular=!1,f.create("Documento ANULADO con \xE9xito")})},async buscarFactura(){this.detalleventaanular={},this.ventasanular=[],this.facturabuscado=!1,this.idtipofacturaanular=1,await y.get(_+"ventas/getventanumerointerno/"+sessionStorage.getItem("co_empresa")+"/"+this.idtipofacturaanular+"/"+this.numerointernoanular).then(async t=>{console.log(this.numerointernoanular),console.log(t),t.status===200?(this.detalleventaanular=t.data.resp,this.idUpd=this.detalleventaanular.id,this.ventasanular=t.data.respdetalles,this.facturabuscado=!0,this.btnDisableAnular=this.detalleventaanular.estatus==="2"||!1):(f.create("Documento NO ENCONTRADO"),this.facturabuscado=!1,this.btnDisableAnular=!0,this.idUpd="")})},async abrirDetalleInvoive(){const t=this;this.detalleventa={},await y.get(_+"ventas/getventa/"+this.idventa).then(async s=>{this.detalleventa=s.data.resp,await y.get(_+"ventas/getitemsventas/"+this.idventa).then(async n=>{t.ventas=[],console.log(n);const d=n.data.resp;for(const c in d){const b=d[c];t.ventas.push(b)}t.deleteHolds(2),t.modaldetalleinvoice=!0}).catch(n=>{f.create("Problemas al listar items Ventas "+n)}),console.log(this.detalleventa)})},async actualizarCantidad(t,s){const n=document.getElementById("cantidad"+t.idproducto);s===1?(n.value=Number(n.value)+1,this.subtotal=(Number(this.subtotal)+t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+(Number(t.precio)+t.precio*t.tasa/100)).toFixed(2)):(n.value>1&&(this.subtotal=(Number(this.subtotal)-t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)-t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)-(Number(t.precio)+t.precio*t.tasa/100)).toFixed(2)),n.value=n.value<=1?1:Number(n.value)-1),t.total=(Number(t.precio)+t.precio*t.tasa/100)*n.value,console.log("this.tasausd"),console.log(this.tasausd),this.subtotalusd=(this.subtotal/this.tasausd).toFixed(2),this.impuestousd=(this.impuesto/this.tasausd).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2);const d=await this.updItemHolds(t.iditemhold,n.value,n.value*(Number(t.precio)+t.precio*t.tasa/100),t.idproducto,s);d?await this.calcularMonto(t):(console.log("resp input false"),console.log(d),n.value=n.value<=1?1:Number(n.value)-1)},calcularMonto(t){const s=document.getElementById("cantidad"+t.idproducto);if(s){const n=s.value>0?s.value:1;this.holds.map(d=>(d.cod===t.cod&&(d.monto=(d.precio*d.tasa/100+d.precio)*n,t.monto=d.monto,d.cantidad=n),d)),document.getElementById("monto"+t.idproducto).innerHTML="Bs."+t.monto.toFixed(2)}},async updItemHolds(t,s,n,d,c){const b={idproducto:d,iditemhold:t,cantidad:s,accion:c,total:n},o=await y.post(_+"ventas/upditemholds",b);return console.log(o.status),o.status===202?(this.$q.dialog({title:"Ooops! "+o.data.resp,message:" Contacte al administrador del sistema.",html:!0,ok:{color:"primary",label:"Aceptar"}}),!1):!0},openDeleteHolds(){this.modaldeleteholds=!0},deleteHolds(t){const s={idhold:this.idhold,accion:t};y.post(_+"ventas/deleteholds",s).then(async n=>{this.modaldeleteholds=!1,this.documentoclienteventa="",this.listarHolds()}).catch(n=>{f.create("Problemas al ELIMINAR Hold de venta "+n)})},deleteItemHolds(t){const s={iditemhold:t.iditemhold,idproducto:t.idproducto,cantidad:t.cantidad};this.$q.dialog({title:"Eliminar Item!",message:"\xBFDesea eliminar este item?",html:!0,ok:{color:"secondary",label:"S\xED"},cancel:{color:"negative",label:"No"},persistent:!0}).onOk(()=>{y.post(_+"ventas/deleteitemholds",s).then(async n=>{console.log(n.data.success),this.nombrecliente="",this.listarHolds()}).catch(n=>{f.create("Problemas al ELIMINAR itemhold de venta "+n)})})},async additemholds(t){const s=this.descuento;let n=!1;const d=this.holds.findIndex(c=>c.idproducto===t.idproducto);if(d===-1){const c=t.precio*t.tasa/100+t.precio,b={idhold:this.idhold,idproducto:t.idproducto,precio:t.precio,cantidad:1,tasa:t.tasa,total:c,idunidad:t.idunidad,descuento:s};await y.post(_+"ventas/setitemholds",b).then(async o=>{const I=o.data.resp;if(o.data.success){const g={};g.idhold=this.idhold,g.iditemhold=I.iditemhold,g.idproducto=t.idproducto,g.precio=t.precio,g.cantidad=1,g.tasa=t.tasa,g.total=c,g.producto=t.producto,g.categoria=t.categoria,g.descripcion=t.descripcion,g.descuento=s,this.subtotal=(Number(this.subtotal)+g.precio*g.cantidad).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+c).toFixed(2),this.holds.push(g),n=!0}else this.buscaritem=!1,this.slide=2}).catch(o=>{f.create("Problemas al crear itemhold de venta "+o)})}else{this.holds[d].cantidad=Number(this.holds[d].cantidad)+1;const c=t.precio*t.tasa/100+t.precio;document.getElementById("monto"+t.idproducto).innerHTML="Bs."+(c*this.holds[d].cantidad).toFixed(2),this.subtotal=(Number(this.subtotal)+t.precio).toFixed(2),this.impuesto=(Number(this.impuesto)+t.precio*t.tasa/100).toFixed(2),this.total=(Number(this.total)+c).toFixed(2),n=await this.updItemHolds(this.holds[d].iditemhold,this.holds[d].cantidad,c*this.holds[d].cantidad,t.idproducto,1)}n&&(this.subtotalusd=(this.subtotal/this.tasausd).toFixed(2),this.impuestousd=(this.impuesto/this.tasausd).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2),this.buscaritem=!1,this.slide=2)},listarProductos(){y.get(_+"productos/"+sessionStorage.getItem("co_empresa")+"/"+0).then(async s=>{const n=s.data.resp;this.rowsproductos=[];for(const d in n){const c={};c.idproducto=n[d].id,c.sku=n[d].sku,c.producto=n[d].producto,c.id=n[d].id,c.categoria=n[d].categoria,c.descripcion=n[d].descripcion,c.unidad=n[d].unidad,c.idunidad=n[d].idunidad,c.impuesto=n[d].impuesto,c.precio=n[d].precio,c.inventario=Number(n[d].inventario1),c.costo=n[d].costo,c.tasa=n[d].tasa,this.rowsproductos.push(c)}this.rowsproductosfiltre=this.rowsproductos}).catch(s=>{f.create("Problemas al listar Categorias "+s)})},abrirRealizarVenta(){this.listarHolds(),this.modalrealizarventa=!0},realizarVenta(){const t=this,s={idhold:this.idhold,tasausd:this.tasausd,totalusd:this.totalusd,idempresa:sessionStorage.getItem("co_empresa")};y.post(_+"ventas/setventa",s).then(async n=>{const d=n.data;console.log(d.success),d.success?(t.idventa=d.resp.idventa,t.abrirDetalleInvoive()):f.create(d.resp.message)}).catch(n=>{f.create("Problemas al REALIZAR venta "+n)}),this.modalrealizarventa=!1},abrirBuscarItem(){this.nombrecliente.length===0?(console.log("Debe buscar cliente"),this.abrirBuscarCliente()):(this.buscaritem=!0,this.textitem="")},abrirBuscarCliente(){this.modalcliente=!0,this.documento="",console.log(this.optionsdocumento[0]),this.modeldocumento=this.optionsdocumento[0],this.limpiarCliente()},limpiarCliente(){this.nombrecliente="",this.telefonocliente="",this.correocliente="",this.direccioncliente="",this.noencontrado=!1,this.encontrado=!1,this.clientebuscado=!1,this.dsbBtnCrearCliente=!0},listarTiposDocumentos(){y.get(_+"tipodocumento").then(async t=>{const s=t.data.data;this.optionsdocumento=[];for(const n in s){const d={};d.cod=s[n].id,d.tipodocumento=s[n].tipodocumento,d.abrev=s[n].abrev,this.optionsdocumento.push(d)}}).catch(t=>{f.create("Problemas al listar Tipos "+t)})},buscarCliente(){if(this.limpiarCliente(),!this.modeldocumento){f.create("Debe seleccionar TIPO DOCUMENTO");return}if(this.documento.length===0){f.create("Debe agregar DOCUMENTO");return}const t={idtipodocumento:this.modeldocumento.cod,documento:this.documento};y.post(_+"clientes/buscar",t).then(async s=>{const n=s.data.resp;n.length>0?(this.idcliente=n[0].id,this.nombrecliente=n[0].nombre,this.telefonocliente=n[0].telefono,this.correocliente=n[0].correo,this.direccioncliente=n[0].direccion,this.noencontrado=!1,this.encontrado=!0):(this.noencontrado=!0,this.encontrado=!1),this.clientebuscado=!0,this.dsbBtnCrearCliente=!1}).catch(s=>{f.create("Problemas al buscar cliente "+s)})},crearCliente(){if(!this.modeldocumento){f.create("Debe seleccionar TIPO DOCUMENTO");return}if(this.documento.length===0){f.create("Debe agregar DOCUMENTO");return}if(this.nombrecliente.length===0){f.create("Debe agregar NOMBRE");return}if(this.encontrado)this.modalcliente=!1,this.idclienteventa=this.idcliente,this.nombreclienteventa=this.nombrecliente,this.documentoclienteventa=this.modeldocumento.abrev+" "+this.documento,this.crearHolds(this.idcliente,this.idusuario);else{const t={idtipodocumento:this.modeldocumento.cod,documento:this.documento,nombre:this.nombrecliente,telefono:this.telefonocliente,correo:this.correocliente,direccion:this.direccioncliente};y.post(_+"clientes/crear",t).then(async s=>{const n=s.data.resp;n&&(this.modalcliente=!1,this.idclienteventa=n,this.nombreclienteventa=this.nombrecliente,this.documentoclienteventa=this.modeldocumento.abrev+" "+this.documento,this.crearHolds(n,this.idusuario))}).catch(s=>{f.create("Problemas al crear cliente "+s)})}},crearHolds(t,s){const d={idcliente:t,idusuario:s,idtipofactura:1};y.post(_+"ventas/setholds",d).then(async c=>{const b=c.data.resp;b&&(this.idhold=b.idhold,this.fechaholds=b.fecha)}).catch(c=>{f.create("Problemas al crear hold de venta "+c)})},async listarHolds(){this.nombrecliente="",await y.get(_+"ventas/gethols/"+sessionStorage.getItem("id_usuario")).then(async t=>{const s=t.data.resp.length>0?t.data.resp[0]:null;console.log(s),this.holds=[],this.slide=1,this.subtotal=0,this.impuesto=0,this.total=0,s&&(this.idcliente=s.idcliente,this.nombrecliente=s.nombre,this.documentoabrev=s.abrev,this.documentoclienteventa=s.abrev+" "+s.documento,this.documentoclientesolo=s.documento,this.idhold=s.idhold,this.fechaholds=j(s.fecha).format("DD/MM/YYYY"),await y.get(_+"ventas/getitemshols/"+this.idhold).then(async n=>{this.holds=n.data.resp;for(const d in this.holds){const c=this.holds[d],b=c.precio*c.cantidad,o=b*c.tasa/100,I=o+b;this.subtotal=(Number(this.subtotal)+b).toFixed(2),this.impuesto=(Number(this.impuesto)+o).toFixed(2),this.total=(Number(this.total)+I).toFixed(2)}this.slide=this.holds.length>0?2:1}).catch(n=>{f.create("Problemas al listar items Holds "+n)})),this.subtotalusd=(this.subtotal/this.tasa).toFixed(2),this.impuestousd=(this.impuesto/this.tasa).toFixed(2),this.totalusd=(this.total/this.tasausd).toFixed(2)}).catch(t=>{f.create("Problemas al listar Holds "+t)})},primeraletra(t){return t[0]},colorLetra(t){const s=t[0].charCodeAt(0);return"#"+s+"0"},async cargar(){const t=await y.get(_+"configuracion/"+sessionStorage.getItem("co_empresa")).catch(s=>{f.create("Problemas al listar Configuracion "+s)});return console.log(t),t.data.resp}},watch:{textitem(t){console.log("textitem"),console.log(t),this.buscadoproducto=!1,t.length>0?this.rowsproductosfiltre=this.rowsproductos.filter(s=>!!(s.producto.toUpperCase().includes(t.toUpperCase())||s.sku&&s.sku.includes(t))):this.rowsproductosfiltre=this.rowsproductos,this.buscadoproducto=!0,this.rowsproductosfiltre=this.rowsproductosfiltre.slice().reverse(),console.log(this.rowsproductosfiltre)}},async mounted(){const t=await this.cargar();this.tasausd=t.tasabcv,this.empresa=t.empresa,this.rif=t.rif,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,console.log("this.tasausd"),console.log(this.tasausd),await this.listarTiposDocumentos(),await this.listarHolds(),await this.listarProductos()}}),q={class:"col",style:{}},G={class:"row"},X={class:"totales col-md-6 col-sm-12 col-xs-12"},K={style:{width:"100%",background:"#ddd","border-radius":"7px",display:"flex","justify-content":"space-between",padding:"3px 10px"}},Z={style:{color:"#000213"}},J={style:{color:"blue","margin-left":"5PX"}},W={style:{color:"#000213"}},tt={style:{color:"blue","margin-left":"5PX"}},et=e("span",null,"Subtotal:",-1),at=e("span",null,"Impuesto:",-1),st=e("span",null,"Descuento:",-1),ot={class:"itemtotal"},lt={class:"itemtotal"},nt={class:"col-md-6 col-sm-12 col-xs-12",style:{display:"-webkit-box","align-items":"center"}},it={class:"botones row"},dt={class:"col-6 contenedorBtn",style:{margin:"5px,"}},rt={class:"col-6 contenedorBtn",style:{margin:"5px,"}},ct={class:"col-6 contenedorBtn",style:{margin:"5px,"}},ut={class:"col-6 contenedorBtn",style:{margin:"5px,"}},ht={class:"col-6 contenedorBtn",style:{margin:"5px,"}},pt={class:"col-6 contenedorBtn",style:{margin:"5px,"}},mt={class:"puntodeventa row"},ft={key:1,class:"puntodeventaconitem col"},yt={class:"row justify-center"},_t={style:{display:"flex"}},bt={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},gt=e("div",{class:"text-center"},"Cantidad",-1),vt=["id","value","onInput"],Ct={style:{display:"grid",width:"25%","justify-content":"center"}},wt={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},kt=e("div",{class:"text-center"},"%Imp.",-1),Nt={class:"text-secondary"},It={style:{display:"grid",width:"25%","font-size":"11px","justify-content":"center"}},Bt=e("div",{class:"text-center"},"Monto",-1),Dt=["id"],Vt={class:""},zt={style:{display:"flex"}},Ft={style:{display:"flex"}},xt={style:{display:"flex"}},At={style:{display:"grid",width:"48%","font-size":"11px","justify-content":"center"}},Pt=e("div",{class:"text-center"},"Unidad",-1),Tt={class:"text-secondary"},Ut={style:{display:"grid",width:"48%","font-size":"11px","justify-content":"center"}},Ht=e("div",{class:"text-center"},"Impuesto.",-1),Et={class:"text-secondary"},St=e("div",{class:"text-h6"},"Buscar cliente",-1),Ot={class:""},jt={class:"row"},Qt={key:0,class:"noencontrado"},Mt={key:1,class:"encontrado"},$t=e("div",{class:"text-h6",style:{"margin-left":"10px"}},"Eliminar Venta",-1),Rt=e("div",{class:"encontrado"}," \xBFDesea eliminar esta venta? ",-1),Lt=e("div",{class:"text-h6",style:{"margin-left":"10px"}}," Realizar esta venta?",-1),Yt={style:{width:"100%"}},qt=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),Gt={style:{"font-weight":"bold"}},Xt={style:{"font-weight":"bold"}},Kt=e("td",null,"Fecha:",-1),Zt={style:{"font-weight":"bold"}},Jt={style:{width:"100%"}},Wt=e("tr",{style:{"font-weight":"bold"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cantidad"),e("td",{class:"rayafactura rayaarriba"},"Tasa %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),te=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),ee={style:{width:"100%"}},ae={class:"letratotalesfactura"},se=e("td",{style:{width:"50%"}},null,-1),oe=e("td",null,"Subtotal Bs.:",-1),le={class:"letratotalesfactura"},ne=e("td",null,null,-1),ie=e("td",null,"Impuestos Bs.:",-1),de={class:"letratotalesfactura"},re=e("td",null,null,-1),ce=e("td",null,"Descuentos Bs.:",-1),ue={class:"letratotalesfactura"},he=e("td",null,null,-1),pe=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),me={class:"rayafactura"},fe={class:"letratotalesfactura",style:{"font-weight":"bold"}},ye=e("td",null,null,-1),_e=e("td",null,"Total Bs.:",-1),be={class:"letratotalesfactura",style:{"font-weight":"bold"}},ge=e("td",null,null,-1),ve=e("td",null,"Total $:",-1),Ce={class:"text-center letratotalesfactura",style:{}},we={class:"text-center letratotalesfactura",style:{}},ke={class:"text-center letratotalesfactura",style:{}},Ne={class:"text-center letratotalesfactura",style:{}},Ie={style:{display:"flex","align-items":"left",width:"100%"}},Be={class:"numero",style:{"margin-left":"10px"}},De={class:"numero",style:{"margin-left":"10px"}},Ve={style:{display:"flex","align-items":"center"}},ze=e("div",{class:"control",style:{"margin-left":"10px"}}," N\xB0 de control:",-1),Fe={class:"control",style:{"margin-left":"10px"}},xe={style:{width:"100%"}},Ae={class:"letratotalesfactura"},Pe=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),Te={style:{"font-weight":"bold"}},Ue={class:"letratotalesfactura"},He={style:{"font-weight":"bold"}},Ee={class:"letratotalesfactura"},Se=e("td",null,"Fecha:",-1),Oe={style:{"font-weight":"bold"}},je={class:"letratotalesfactura"},Qe=e("td",null,"Cajero:",-1),Me={style:{"font-weight":"bold"}},$e={style:{width:"100%"}},Re=e("tr",{style:{"font-weight":"bold","font-size":"11px"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cant."),e("td",{class:"rayafactura rayaarriba"},"Imp %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),Le={style:{"text-align":"right"}},Ye=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),qe={style:{width:"100%"}},Ge={class:"letratotalesfactura"},Xe=e("td",{style:{width:"40%"}},null,-1),Ke=e("td",null,"Subtotal Bs.:",-1),Ze={style:{"text-align":"right"}},Je={class:"letratotalesfactura"},We=e("td",null,null,-1),ta=e("td",null,"Impuestos Bs.:",-1),ea={style:{"text-align":"right"}},aa={class:"letratotalesfactura"},sa=e("td",null,null,-1),oa=e("td",null,"Descuentos Bs.:",-1),la={style:{"text-align":"right"}},na={class:"letratotalesfactura"},ia=e("td",null,null,-1),da=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),ra={class:"rayafactura",style:{"text-align":"right"}},ca={class:"letratotalesfactura",style:{"font-weight":"bold"}},ua=e("td",null,null,-1),ha=e("td",null,"Total Bs.:",-1),pa={style:{"text-align":"right"}},ma={class:"letratotalesfactura",style:{"font-weight":"bold"}},fa=e("td",null,null,-1),ya=e("td",null,"Total $:",-1),_a={style:{"text-align":"right"}},ba=e("div",{class:"text-h6",style:{"margin-left":"10px"}}," Anular Documento",-1),ga={class:"row"},va={style:{display:"flex","align-items":"left",width:"100%"}},Ca={class:"numero",style:{"margin-left":"10px"}},wa={class:"numero",style:{"margin-left":"10px"}},ka={style:{display:"flex","align-items":"center"}},Na=e("div",{class:"control",style:{"margin-left":"10px"}}," N\xB0 de control:",-1),Ia={class:"control",style:{"margin-left":"10px"}},Ba={style:{width:"100%"}},Da={class:"letratotalesfactura"},Va=e("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),za={style:{"font-weight":"bold"}},Fa={class:"letratotalesfactura"},xa={style:{"font-weight":"bold"}},Aa={class:"letratotalesfactura"},Pa=e("td",null,"Fecha:",-1),Ta={style:{"font-weight":"bold"}},Ua={class:"letratotalesfactura"},Ha=e("td",null,"Cajero:",-1),Ea={style:{"font-weight":"bold"}},Sa={style:{width:"100%"}},Oa=e("tr",{style:{"font-weight":"bold","font-size":"11px"}},[e("td",{class:"rayafactura rayaarriba"},"Producto"),e("td",{class:"rayafactura rayaarriba"},"Precio"),e("td",{class:"rayafactura rayaarriba"},"Cant."),e("td",{class:"rayafactura rayaarriba"},"Imp %"),e("td",{class:"rayafactura rayaarriba"},"Total")],-1),ja={style:{"text-align":"right"}},Qa=e("tr",null,[e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"}),e("td",{class:"rayafactura"})],-1),Ma={style:{width:"100%"}},$a={class:"letratotalesfactura"},Ra=e("td",{style:{width:"40%"}},null,-1),La=e("td",null,"Subtotal Bs.:",-1),Ya={style:{"text-align":"right"}},qa={class:"letratotalesfactura"},Ga=e("td",null,null,-1),Xa=e("td",null,"Impuestos Bs.:",-1),Ka={style:{"text-align":"right"}},Za={class:"letratotalesfactura"},Ja=e("td",null,null,-1),Wa=e("td",null,"Descuentos Bs.:",-1),ts={style:{"text-align":"right"}},es={class:"letratotalesfactura"},as=e("td",null,null,-1),ss=e("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),os={class:"rayafactura",style:{"text-align":"right"}},ls={class:"letratotalesfactura",style:{"font-weight":"bold"}},ns=e("td",null,null,-1),is=e("td",null,"Total Bs.:",-1),ds={style:{"text-align":"right"}},rs={class:"letratotalesfactura",style:{"font-weight":"bold"}},cs=e("td",null,null,-1),us=e("td",null,"Total $:",-1),hs={style:{"text-align":"right"}};function ps(t,s,n,d,c,b){return u(),v(L,{class:"bg-coral"},{default:i(()=>[e("div",q,[e("div",G,[e("div",X,[a(N,{class:"my-card",bordered:"",style:{margin:"10px"}},{default:i(()=>[a(m,{style:{padding:"7px 16px"}},{default:i(()=>[e("div",K,[e("span",Z,[C("Cliente: "),e("span",J,l(t.nombrecliente.length>0?t.nombrecliente:"S/INF"),1)]),e("span",W,[C("Fecha venta: "),e("span",tt,l(t.nombrecliente.length>0?t.fechaholds:t.fechahoy),1)])])]),_:1}),a(h),a(m,{horizontal:""},{default:i(()=>[a(m,{class:"column",style:{padding:"7px","font-size":"12px","align-items":"center"}},{default:i(()=>[e("span",null,"BCV Bs. "+l(t.tasausd||"0.00"),1),a(V,{"text-color":"white",style:S("background: "+t.colorLetra(t.nombrecliente.toUpperCase()||"S/INF"))},{default:i(()=>[C(l(t.primeraletra(t.nombrecliente.toUpperCase()||"S/INF")),1)]),_:1},8,["style"]),a(O,{color:"blue",style:{"margin-top":"5px"}},{default:i(()=>[C(l(t.documentoclienteventa||"S/INF"),1)]),_:1})]),_:1}),a(h,{vertical:""}),a(m,{style:{display:"grid",padding:"7px 16px","font-size":"12px",width:"140px"}},{default:i(()=>[et,at,st,e("span",ot,"$ "+l(t.totalusd),1)]),_:1}),a(h,{vertical:""}),a(m,{style:{display:"grid",padding:"7px 16px","font-size":"12px"}},{default:i(()=>[e("span",null,"Bs. "+l(t.subtotal),1),e("span",null,"Bs. "+l(t.impuesto),1),e("span",null,"Bs. "+l(t.descuento),1),e("span",lt,"Bs. "+l(t.total),1)]),_:1})]),_:1})]),_:1})]),e("div",nt,[e("div",it,[e("div",dt,[a(p,{color:"primary",icon:"zoom_in",onClick:t.abrirBuscarItem,label:"Agregar item",style:{"font-size":"12px"}},null,8,["onClick"])]),e("div",rt,[a(p,{color:"secondary","icon-right":"paid",onClick:t.abrirRealizarVenta,label:"Realizar venta",style:{"font-size":"12px"},disable:t.holds.length<=0},null,8,["onClick","disable"])]),e("div",ct,[a(p,{color:"secondary",icon:"cancel",onClick:t.openDeleteHolds,label:"Cancelar venta",style:{"font-size":"12px"},disable:t.holds.length<=0},null,8,["onClick","disable"])]),e("div",ut,[a(p,{color:"primary","icon-right":"person_add_alt",onClick:t.abrirBuscarCliente,label:"Agregar cliente",style:{"font-size":"12px"}},null,8,["onClick"])]),e("div",ht,[a(p,{color:"primary",icon:"cancel_presentation",onClick:t.abrirBuscarFactura,label:"Anular",style:{"font-size":"12px"}},null,8,["onClick"])]),e("div",pt,[a(p,{color:"secondary","icon-right":"assignment_return",onClick:t.abrirBuscarFactura,label:"Devoluciones",style:{"font-size":"12px"},disable:!0},null,8,["onClick"])])])])]),e("div",mt,[t.slide===1?(u(),v(z,{key:0,class:"carritofondo",name:"remove_shopping_cart"})):(u(),k("div",ft,[e("div",yt,[(u(!0),k(T,null,U(t.holds,o=>(u(),v(N,{key:o,class:"my-card tarjetaitem col-md-5 col-sm-11 col-xs-11",style:{height:"fit-content"}},{default:i(()=>[a(E,{horizontal:""},{default:i(()=>[a(B,null,{default:i(()=>[a(H,null,{default:i(()=>[C(l(o.producto),1)]),_:2},1024),a(H,{caption:""},{default:i(()=>[C(l(o.categoria),1)]),_:2},1024)]),_:2},1024),a(B,{side:""},{default:i(()=>[a(p,{flat:"",round:"",color:"red",icon:"delete",onClick:I=>t.deleteItemHolds(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),a(E,{horizontal:""},{default:i(()=>[a(B,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:i(()=>[a(V,{"text-color":"white",style:S("background: "+t.colorLetra(o.producto))},{default:i(()=>[C(l(t.primeraletra(o.producto)),1)]),_:2},1032,["style"]),a(O,{color:"blue",style:{"margin-top":"5px"}},{default:i(()=>[C(" Bs "+l(o.precio),1)]),_:2},1024)]),_:2},1024),a(B,{class:"tarjeticainside"},{default:i(()=>[e("div",_t,[e("div",bt,[gt,e("input",{class:"inputCantidad",id:"cantidad"+o.idproducto,value:o.cantidad,onInput:I=>t.calcularMonto(o)},null,40,vt)]),e("div",Ct,[a(p,{class:"btncantidad",color:"blue","icon-right":"add_circle",onClick:I=>t.actualizarCantidad(o,1),style:{"margin-bottom":"7px"}},null,8,["onClick"]),a(p,{class:"btncantidad",color:"red",icon:"remove_circle",onClick:I=>t.actualizarCantidad(o,2)},null,8,["onClick"])]),e("div",wt,[kt,e("div",Nt,l(o.tasa),1)]),e("div",It,[Bt,e("div",{id:"monto"+o.idproducto,class:"text-secondary text-center"},"Bs. "+l(o.total),9,Dt)])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]))])]),a(A,{modelValue:t.buscaritem,"onUpdate:modelValue":s[2]||(s[2]=o=>t.buscaritem=o),position:"top"},{default:i(()=>[a(N,{style:{background:"#ddd",width:"350px"}},{default:i(()=>[a(m,{style:{padding:"10px 15px 7px"}},{default:i(()=>[e("div",Vt,[a(D,{color:"white","bg-color":"primary",rounded:"",standout:"","bottom-slots":"",modelValue:t.textitem,"onUpdate:modelValue":s[1]||(s[1]=o=>t.textitem=o),label:"Nombre o Sku de producto",counter:"",autofocus:""},{prepend:i(()=>[a(z,{name:"search"})]),append:i(()=>[a(z,{name:"close",onClick:s[0]||(s[0]=o=>t.textitem=""),class:"cursor-pointer"})]),hint:i(()=>[C(" Cantidad de letras ")]),_:1},8,["modelValue"])])]),_:1}),a(h),t.buscadoproducto?(u(),v(m,{key:0,style:{"max-height":"64vh"},class:"scroll"},{default:i(()=>[(u(!0),k(T,null,U(t.rowsproductosfiltre,o=>(u(),v(N,{key:o.id,class:"my-card tarjetaitem"},{default:i(()=>[a(E,{horizontal:""},{default:i(()=>[a(B,null,{default:i(()=>[a(H,null,{default:i(()=>[C(l(o.producto),1)]),_:2},1024),a(H,null,{default:i(()=>[C("SKU "+l(o.sku),1)]),_:2},1024),a(H,{caption:""},{default:i(()=>[C(l(o.categoria),1)]),_:2},1024)]),_:2},1024),a(B,{side:""},{default:i(()=>[e("div",zt,[a(p,{flat:"",round:"",color:"blue",icon:"add_shopping_cart",onClick:I=>t.additemholds(o)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),a(E,{horizontal:""},{default:i(()=>[a(B,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:i(()=>[a(V,{"text-color":"white",style:S("background: "+t.colorLetra(o.producto))},{default:i(()=>[C(l(t.primeraletra(o.producto)),1)]),_:2},1032,["style"]),a(O,{color:"blue",style:{"margin-top":"5px"}},{default:i(()=>[C(" Bs. "+l(o.precio),1)]),_:2},1024)]),_:2},1024),a(B,{class:"tarjeticainside"},{default:i(()=>[e("div",Ft,l(o.descripcion),1),e("div",xt,[e("div",At,[Pt,e("div",Tt,l(o.unidad),1)]),e("div",Ut,[Ht,e("div",Et,l(o.impuesto),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:t.modalcliente,"onUpdate:modelValue":s[9]||(s[9]=o=>t.modalcliente=o),position:"top"},{default:i(()=>[a(N,{style:{"max-height":"87vh"}},{default:i(()=>[a(m,null,{default:i(()=>[St]),_:1}),a(h),a(m,{style:{padding:"0 15px"}},{default:i(()=>[e("div",Ot,[a(R,{filled:"",modelValue:t.modeldocumento,"onUpdate:modelValue":s[3]||(s[3]=o=>t.modeldocumento=o),options:t.optionsdocumento,"option-label":"tipodocumento","option-value":"cod",label:"Seleccione tipo documento",dense:""},null,8,["modelValue","options"])])]),_:1}),a(h),a(m,{style:{padding:"10px 15px"}},{default:i(()=>[e("div",jt,[a(D,{class:"col-10",filled:"",modelValue:t.documento,"onUpdate:modelValue":s[4]||(s[4]=o=>t.documento=o),label:"Documento","stack-label":"",autofocus:""},null,8,["modelValue"]),a(p,{class:"col-2",icon:"search",color:"secondary",onClick:t.buscarCliente},null,8,["onClick"])])]),_:1}),t.noencontrado?(u(),k("div",Qt," CLIENTE NO ENCONTRADO ")):w("",!0),t.encontrado?(u(),k("div",Mt," CLIENTE ENCONTRADO ")):w("",!0),t.clientebuscado?(u(),v(h,{key:2})):w("",!0),t.clientebuscado?(u(),v(m,{key:3,style:{padding:"0 15px"}},{default:i(()=>[a(D,{filled:"",modelValue:t.nombrecliente,"onUpdate:modelValue":s[5]||(s[5]=o=>t.nombrecliente=o),label:"Nombre cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:4})):w("",!0),t.clientebuscado?(u(),v(m,{key:5,style:{padding:"0 15px"}},{default:i(()=>[a(D,{filled:"",modelValue:t.correocliente,"onUpdate:modelValue":s[6]||(s[6]=o=>t.correocliente=o),label:"Email cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:6})):w("",!0),t.clientebuscado?(u(),v(m,{key:7,style:{padding:"0 15px"}},{default:i(()=>[a(D,{filled:"",modelValue:t.telefonocliente,"onUpdate:modelValue":s[7]||(s[7]=o=>t.telefonocliente=o),label:"Tel\xE9fono cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),t.clientebuscado?(u(),v(h,{key:8})):w("",!0),t.clientebuscado?(u(),v(m,{key:9,style:{padding:"0 15px"}},{default:i(()=>[a(D,{filled:"",modelValue:t.direccioncliente,"onUpdate:modelValue":s[8]||(s[8]=o=>t.direccioncliente=o),label:"Direcci\xF3n cliente","stack-label":""},null,8,["modelValue"])]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cancelar",color:"negative",onClick:t.limpiarCliente},null,8,["onClick"]),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:t.crearCliente,disable:t.dsbBtnCrearCliente},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:t.modaldeleteholds,"onUpdate:modelValue":s[11]||(s[11]=o=>t.modaldeleteholds=o),persistent:""},{default:i(()=>[a(N,{style:{}},{default:i(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:i(()=>[a(V,{color:"primary","text-color":"white"},{default:i(()=>[a(z,{name:"delete"})]),_:1}),$t]),_:1}),a(h),a(m,{style:{}},{default:i(()=>[Rt]),_:1}),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cancelar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:s[10]||(s[10]=o=>t.deleteHolds(1))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:t.modalrealizarventa,"onUpdate:modelValue":s[12]||(s[12]=o=>t.modalrealizarventa=o),persistent:""},{default:i(()=>[a(N,{style:{}},{default:i(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:i(()=>[a(V,{color:"primary","text-color":"white"},{default:i(()=>[a(z,{name:"shopping_cart_checkout"})]),_:1}),Lt]),_:1}),a(h),a(m,null,{default:i(()=>[e("table",Yt,[e("tr",null,[qt,e("td",Gt,l(t.nombrecliente),1)]),e("tr",null,[e("td",null,l(t.documentoabrev)+":",1),e("td",Xt,l(t.documentoclientesolo),1)]),e("tr",null,[Kt,e("td",Zt,l(t.fechaholds),1)])]),e("table",Jt,[Wt,(u(!0),k(T,null,U(t.holds,o=>(u(),k("tr",{key:o},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",null,l(o.total),1)]))),128)),te]),e("table",ee,[e("tr",ae,[se,oe,e("td",null,l(t.subtotal),1)]),e("tr",le,[ne,ie,e("td",null,l(t.impuesto),1)]),e("tr",de,[re,ce,e("td",null,l(t.descuento),1)]),e("tr",ue,[he,pe,e("td",me,l(t.igtf),1)]),e("tr",fe,[ye,_e,e("td",null,l(t.total),1)]),e("tr",be,[ge,ve,e("td",null,l(t.totalusd),1)])])]),_:1}),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cancelar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",onClick:t.realizarVenta},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:t.modaldetalleinvoice,"onUpdate:modelValue":s[13]||(s[13]=o=>t.modaldetalleinvoice=o),persistent:""},{default:i(()=>[a(N,{style:{width:"320px"}},{default:i(()=>[a(m,{style:{"justify-content":"center"}},{default:i(()=>[e("div",Ce,l(t.empresa)+" - "+l(t.rif),1),e("div",we,l(t.direccion),1),e("div",ke,l(t.telefono),1),e("div",Ne,l(t.email),1),a(h,{style:{margin:"10px 0px"}}),e("div",Ie,[e("div",Be,l(t.detalleventa.tipofactura),1),e("div",De,l(t.detalleventa.numerointerno),1)]),e("div",Ve,[ze,e("div",Fe,l(t.detalleventa.numerocontrol),1)]),a(h,{style:{margin:"10px 0px"}}),e("table",xe,[e("tr",Ae,[Pe,e("td",Te,l(t.detalleventa.nombrecliente),1)]),e("tr",Ue,[e("td",null,l(t.detalleventa.abrev),1),e("td",He,l(t.detalleventa.documento),1)]),e("tr",Ee,[Se,e("td",Oe,l(t.fechaDetalle(t.detalleventa.fecha)),1)]),e("tr",je,[Qe,e("td",Me,l(t.detalleventa.usuario),1)])]),e("table",$e,[Re,(u(!0),k(T,null,U(t.ventas,o=>(u(),k("tr",{key:o,style:{"font-size":"11px"}},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",Le,l(o.subtotal),1)]))),128)),Ye]),e("table",qe,[e("tr",Ge,[Xe,Ke,e("td",Ze,l(t.detalleventa.subtotal),1)]),e("tr",Je,[We,ta,e("td",ea,l(t.detalleventa.impuesto),1)]),e("tr",aa,[sa,oa,e("td",la,l(t.detalleventa.descuentos),1)]),e("tr",na,[ia,da,e("td",ra,l(t.detalleventa.igtf),1)]),e("tr",ca,[ua,ha,e("td",pa,l(t.detalleventa.total),1)]),e("tr",ma,[fa,ya,e("td",_a,l(t.detalleventa.totalusd),1)])])]),_:1}),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]]),a(p,{label:"Imprimir",color:"secondary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:t.modalanular,"onUpdate:modelValue":s[15]||(s[15]=o=>t.modalanular=o),persistent:""},{default:i(()=>[a(N,{style:{width:"320px"}},{default:i(()=>[a(m,{style:{display:"flex","align-items":"center"}},{default:i(()=>[a(V,{color:"primary","text-color":"white"},{default:i(()=>[a(z,{name:"cancel_presentation"})]),_:1}),ba]),_:1}),a(h),a(m,{style:{"justify-content":"center"}},{default:i(()=>[e("div",ga,[a(D,{class:"col-10",filled:"",modelValue:t.numerointernoanular,"onUpdate:modelValue":s[14]||(s[14]=o=>t.numerointernoanular=o),label:"N\xFAmero Interno","stack-label":"",autofocus:""},null,8,["modelValue"]),a(p,{class:"col-2",icon:"search",color:"secondary",onClick:t.buscarFactura},null,8,["onClick"])])]),_:1}),a(h),t.facturabuscado?(u(),v(m,{key:0,style:{"justify-content":"center"}},{default:i(()=>[e("div",{class:$(t.detalleventaanular.estatus==="1"?"procesada":"anulada"),style:{display:"flex","justify-content":"center","align-items":"center",width:"100%"}},l(t.detalleventaanular.estatus==="1"?"PROCESADA":"ANULADA"),3),e("div",va,[e("div",Ca,l(t.detalleventaanular.tipofactura),1),e("div",wa,l(t.detalleventaanular.numerointerno),1)]),e("div",ka,[Na,e("div",Ia,l(t.detalleventaanular.numerocontrol),1)]),a(h,{style:{margin:"10px 0px"}}),e("table",Ba,[e("tr",Da,[Va,e("td",za,l(t.detalleventaanular.nombrecliente),1)]),e("tr",Fa,[e("td",null,l(t.detalleventaanular.abrev),1),e("td",xa,l(t.detalleventaanular.documento),1)]),e("tr",Aa,[Pa,e("td",Ta,l(t.fechaDetalle(t.detalleventaanular.fecha)),1)]),e("tr",Ua,[Ha,e("td",Ea,l(t.detalleventaanular.usuario),1)])]),e("table",Sa,[Oa,(u(!0),k(T,null,U(t.ventasanular,o=>(u(),k("tr",{key:o,style:{"font-size":"11px"}},[e("td",null,l(o.producto),1),e("td",null,l(o.precio),1),e("td",null,l(o.cantidad),1),e("td",null,l(o.tasa)+"%",1),e("td",ja,l(o.subtotal),1)]))),128)),Qa]),e("table",Ma,[e("tr",$a,[Ra,La,e("td",Ya,l(t.detalleventaanular.subtotal),1)]),e("tr",qa,[Ga,Xa,e("td",Ka,l(t.detalleventaanular.impuesto),1)]),e("tr",Za,[Ja,Wa,e("td",ts,l(t.detalleventaanular.descuentos),1)]),e("tr",es,[as,ss,e("td",os,l(t.detalleventaanular.igtf),1)]),e("tr",ls,[ns,is,e("td",ds,l(t.detalleventaanular.total),1)]),e("tr",rs,[cs,us,e("td",hs,l(t.detalleventaanular.totalusd),1)])])]),_:1})):w("",!0),a(h),a(F,{align:"right"},{default:i(()=>[x(a(p,{label:"Cerrar",color:"negative"},null,512),[[P]]),a(p,{label:"Aceptar",color:"secondary",disable:t.btnDisableAnular,onClick:t.anularDocumento},null,8,["disable","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ks=Q(Y,[["render",ps]]);export{ks as default};
