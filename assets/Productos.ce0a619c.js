import{_ as N,aj as z,r as u,N as f,k as h,al as y,t as i,m as a,q as s,B as g,z as A,l as S,ax as F,ay as $,Q as I,x as c,au as p,y as r,A as j,a3 as U,az as B,at as V,am as m,av as L,aw as T,an as P}from"./index.aba143e8.js";import{Q as D,C}from"./ClosePopup.a7cc1708.js";import{Q as E,a as w}from"./QItem.1d482576.js";import{Q}from"./QBadge.224e8b6c.js";import{Q as k}from"./QSelect.4e25f8e6.js";import{Q as K}from"./QPage.8e94c73d.js";import{a as b}from"./axios.7331a07d.js";import"./format.a0fe48fe.js";const v="https://posapi-test.factura-smart.com/",q=z({name:"IndexPage",setup(){return{slide:u(2),rows:u([]),sku:u(""),producto:u(""),idproducto:u(null),descripcion:u(""),costo:u(0),precio:u(0),costousd:u(0),preciousd:u(0),utilidad:u(0),inventario:u(0),buscaritem:u(!1),editaritem:u(!1),model:u(null),options:[],modeltax:u(null),optionstax:[],modelunidad:u(null),optionsunidad:[]}},methods:{listar(){this.btndisable=!1;const o=0;b.get(v+"productos/"+sessionStorage.getItem("co_empresa")+"/"+o).then(async e=>{console.log(e.data);const d=e.data.resp;this.rows=[];for(const t in d){const n={};n.cod=d[t].id,n.sku=d[t].sku,n.producto=d[t].producto,n.categoria=d[t].categoria,n.idcategoria=d[t].idcategoria,n.descripcion=d[t].descripcion,n.unidad=d[t].unidad,n.idunidad=d[t].idunidad,n.impuesto=d[t].impuesto,n.idimpuesto=d[t].idimpuesto,n.precio=d[t].precio,n.costo=d[t].costo,n.utilidad=d[t].utilidad,n.preciousd=d[t].preciousd,n.costousd=d[t].costousd,n.inventario=Number(d[t].inventario1)||0,this.rows.push(n)}console.log(this.rows)}).catch(e=>{f.create("Problemas al listar Categorias "+e)})},openEditar(o){this.editaritem=!0;const e=this.options.find(n=>n.cod===o.idcategoria);this.model=e;const d=this.optionstax.find(n=>n.cod===o.idimpuesto);this.modeltax=d;const t=this.optionsunidad.find(n=>n.cod===o.idunidad);this.modelunidad=t,this.sku=o.sku,this.descripcion=o.descripcion,this.idproducto=o.cod,this.producto=o.producto,this.costo=o.costo,this.inventario=o.inventario,this.precio=o.precio,this.costousd=o.costousd,this.utilidad=o.utilidad,this.preciousd=o.preciousd},openCrear(){this.limpiar(),this.buscaritem=!0},limpiar(){this.model=null,this.modeltax=null,this.modelunidad=null,this.sku="",this.descripcion="",this.producto="",this.costo=0,this.costousd=0,this.inventario="",this.precio=0,this.preciousd=0},editar(){if(this.producto.length===0||this.descripcion.length===0||this.precio.length===0||this.preciousd.length===0||this.inventario.length===0)return;const o={id:this.idproducto,idcategoria:this.model.cod,idimpuesto:this.modeltax.cod,idunidad:this.modelunidad.cod,descripcion:this.descripcion,producto:this.producto,sku:this.sku,costo:this.costo||0,costousd:this.costousd||0,inventario:this.inventario,utilidad:this.utilidad,precio:this.precio,preciousd:this.preciousd};b.post(v+"productos/updateproductos",o).then(async e=>{this.modalcrear=!1,console.log(e.data),f.create(e.data.resp.message),this.listar()})},crear(){if(this.producto.length===0||this.descripcion.length===0||this.precio.length===0||this.preciousd.length===0||this.inventario.length===0)return;const o={idcategoria:this.model.cod,idimpuesto:this.modeltax.cod,idunidad:this.modelunidad.cod,descripcion:this.descripcion,producto:this.producto,sku:this.sku,costo:this.costo,costousd:this.costousd,preciousd:this.preciousd,inventario:this.inventario,utilidad:this.utilidad,precio:this.precio};b.post(v+"productos",o).then(async e=>{this.modalcrear=!1,f.create(e.data.message),this.listar()})},listarCategoria(){b.get(v+"categoria/"+sessionStorage.getItem("co_empresa")).then(async o=>{const e=o.data.resp;this.options=[];for(const d in e){const t={};t.cod=e[d].id,t.categoria=e[d].categoria,t.descripcion=e[d].descripcion,this.options.push(t)}}).catch(o=>{f.create("Problemas al listar Categorias "+o)})},listarImpuesto(){b.get(v+"impuestos").then(async o=>{const e=o.data.resp;this.optionstax=[];for(const d in e){const t={};t.cod=e[d].id,t.impuesto=e[d].impuesto,t.tasa=e[d].tasa,this.optionstax.push(t)}}).catch(o=>{f.create("Problemas al listar Impuestos "+o)})},listarUnidades(){b.get(v+"unidades").then(async o=>{const e=o.data.resp;this.optionsunidad=[];for(const d in e){const t={};t.cod=e[d].id,t.unidad=e[d].unidad,this.optionsunidad.push(t)}}).catch(o=>{f.create("Problemas al listar Unidades "+o)})},primeraletra(o){return o[0]},colorLetra(o){const e=o[0].charCodeAt(0);return"#"+e+"0"},async cargar(){const o=await b.get(v+"configuracion/"+sessionStorage.getItem("co_empresa")).catch(e=>{f.create("Problemas al listar Configuracion "+e)});return console.log(o),o.data.resp}},watch:{costo(){this.costo>0?(this.costousd=(this.costo/this.tasausd).toFixed(2),this.utilidad=((this.precio-this.costo)/this.costo*100).toFixed(2)):(this.costousd=0,this.utilidad=0,this.costo=0)},precio(){this.precio>0?(this.preciousd=(this.precio/this.tasausd).toFixed(2),this.costo>0&&(this.utilidad=((this.precio-this.costo)/this.costo*100).toFixed(2))):(this.preciousd=0,this.utilidad=0,this.precio=0)}},async mounted(){const o=await this.cargar();this.tasausd=o.tasabcv,this.listar(),this.listarCategoria(),this.listarImpuesto(),this.listarUnidades()}}),H={class:"col"},O={class:"botones row",style:{background:"#ededed"}},_={class:"listarproductos row"},G={key:1,class:"puntodeventaconitem col"},J={class:"row justify-center"},M={style:{display:"flex"}},R={style:{display:"flex"}},W={style:{display:"flex"}},X={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},Y=a("div",{class:"text-center"},"Unidad",-1),Z={class:"text-secondary"},x={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},oo=a("div",{class:"text-center"},"Impuesto.",-1),eo={class:"text-secondary"},lo={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},so=a("div",{class:"text-center"},"Inventario",-1),to={class:"text-center"},io=a("div",{class:"text-h6"},"Crear producto",-1),ao={class:"col",style:{padding:"0 10px"}},no={class:""},ro={class:"col"},uo={class:"col"},co={class:"row"},po={class:"row"},mo={class:"row"},ho=a("div",{class:"text-h6"},"Editar producto",-1),fo={class:"col",style:{padding:"0 10px"}},go={class:""},Vo={class:"col"},bo={class:"col"},vo={class:"row"},yo={class:"row"},ko={class:"row"};function Uo(o,e,d,t,n,Co){return h(),y(K,{class:"bg-white"},{default:i(()=>[a("div",H,[a("div",O,[s(g,{color:"secondary",icon:"add_circle",onClick:o.openCrear,label:"Agregar producto",style:{margin:"10px"}},null,8,["onClick"])]),a("div",_,[o.slide===1?(h(),y(A,{key:0,class:"carritofondo",name:"remove_shopping_cart"})):(h(),S("div",G,[a("div",J,[(h(!0),S(F,null,$(o.rows,l=>(h(),y(I,{key:l,class:"my-card tarjetaitem col-md-5 col-sm-11 col-xs-11"},{default:i(()=>[s(E,{horizontal:""},{default:i(()=>[s(w,null,{default:i(()=>[s(D,null,{default:i(()=>[V(m(l.sku)+" "+m(l.producto),1)]),_:2},1024),s(D,{caption:""},{default:i(()=>[V(m(l.categoria),1)]),_:2},1024)]),_:2},1024),s(w,{side:""},{default:i(()=>[a("div",M,[s(g,{flat:"",round:"",color:"red",icon:"delete"}),s(g,{flat:"",round:"",color:"blue",icon:"edit",onClick:wo=>o.openEditar(l)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),s(E,{horizontal:""},{default:i(()=>[s(w,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:i(()=>[s(L,{"text-color":"white",style:T("background: "+o.colorLetra(l.producto))},{default:i(()=>[V(m(o.primeraletra(l.producto)),1)]),_:2},1032,["style"]),s(Q,{color:"blue",style:{"margin-top":"5px"}},{default:i(()=>[V(m(l.precio),1)]),_:2},1024)]),_:2},1024),s(w,{class:"tarjeticainside"},{default:i(()=>[a("div",R,m(l.descripcion),1),a("div",W,[a("div",X,[Y,a("div",Z,m(l.unidad),1)]),a("div",x,[oo,a("div",eo,m(l.impuesto),1)]),a("div",lo,[so,a("div",to,[l.inventario>10?(h(),y(Q,{key:0,class:"estatusbien"},{default:i(()=>[V(m(l.inventario),1)]),_:2},1024)):P("",!0),l.inventario>0&&l.inventario<=10?(h(),y(Q,{key:1,class:"estatusmedio"},{default:i(()=>[V(m(l.inventario),1)]),_:2},1024)):P("",!0),l.inventario===0?(h(),y(Q,{key:2,class:"estatusmal"},{default:i(()=>[V(m(l.inventario),1)]),_:2},1024)):P("",!0)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]))])]),s(B,{modelValue:o.buscaritem,"onUpdate:modelValue":e[12]||(e[12]=l=>o.buscaritem=l),position:"top"},{default:i(()=>[s(I,null,{default:i(()=>[s(c,null,{default:i(()=>[io]),_:1}),s(p),s(c,{class:"row"},{default:i(()=>[s(r,{class:"col",filled:"",modelValue:o.sku,"onUpdate:modelValue":e[0]||(e[0]=l=>o.sku=l),label:"SKU","stack-label":"",dense:""},null,8,["modelValue"]),a("div",ao,[s(k,{filled:"",modelValue:o.model,"onUpdate:modelValue":e[1]||(e[1]=l=>o.model=l),options:o.options,"option-label":"categoria","option-value":"cod",label:"Seleccione categor\xEDa",dense:""},null,8,["modelValue","options"])])]),_:1}),s(p),s(c,null,{default:i(()=>[a("div",no,[s(r,{filled:"",modelValue:o.producto,"onUpdate:modelValue":e[2]||(e[2]=l=>o.producto=l),label:"Producto","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),s(p),s(c,null,{default:i(()=>[s(r,{modelValue:o.descripcion,"onUpdate:modelValue":e[3]||(e[3]=l=>o.descripcion=l),label:"Descripci\xF3n de producto",filled:"",dense:"",type:"textarea"},null,8,["modelValue"])]),_:1}),s(p),s(c,{class:"row"},{default:i(()=>[a("div",ro,[s(k,{filled:"",modelValue:o.modeltax,"onUpdate:modelValue":e[4]||(e[4]=l=>o.modeltax=l),options:o.optionstax,"option-label":"impuesto","option-value":"cod",label:"Elija impuesto",dense:""},null,8,["modelValue","options"])]),a("div",uo,[s(k,{filled:"",modelValue:o.modelunidad,"onUpdate:modelValue":e[5]||(e[5]=l=>o.modelunidad=l),options:o.optionsunidad,"option-label":"unidad","option-value":"cod",label:"Elija unidad",dense:""},null,8,["modelValue","options"])])]),_:1}),s(p),s(c,null,{default:i(()=>[a("div",co,[s(r,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.costo,"onUpdate:modelValue":e[6]||(e[6]=l=>o.costo=l),label:"Costo Bs.","stack-label":"",dense:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.costousd,"onUpdate:modelValue":e[7]||(e[7]=l=>o.costousd=l),label:"Costo USD","stack-label":"",dense:""},null,8,["modelValue"])]),a("div",po,[s(r,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.precio,"onUpdate:modelValue":e[8]||(e[8]=l=>o.precio=l),label:"Precio Bs.","stack-label":"",dense:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.preciousd,"onUpdate:modelValue":e[9]||(e[9]=l=>o.preciousd=l),label:"Precio USD","stack-label":"",dense:""},null,8,["modelValue"])]),a("div",mo,[s(r,{style:{"margin-right":"5px"},class:"col",filled:"",modelValue:o.utilidad,"onUpdate:modelValue":e[10]||(e[10]=l=>o.utilidad=l),label:"Utilidad %","stack-label":"",dense:"",readonly:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.inventario,"onUpdate:modelValue":e[11]||(e[11]=l=>o.inventario=l),label:"Inventario","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),s(p),s(j,{align:"right"},{default:i(()=>[U(s(g,{label:"Cancelar",color:"negative"},null,512),[[C]]),U(s(g,{label:"Aceptar",color:"secondary",onClick:o.crear},null,8,["onClick"]),[[C]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(B,{modelValue:o.editaritem,"onUpdate:modelValue":e[26]||(e[26]=l=>o.editaritem=l),position:"top"},{default:i(()=>[s(I,null,{default:i(()=>[s(c,null,{default:i(()=>[ho]),_:1}),s(p),s(c,{class:"row"},{default:i(()=>[s(r,{class:"col",filled:"",modelValue:o.sku,"onUpdate:modelValue":e[13]||(e[13]=l=>o.sku=l),label:"SKU","stack-label":"",dense:""},null,8,["modelValue"]),a("div",fo,[s(k,{filled:"",modelValue:o.model,"onUpdate:modelValue":e[14]||(e[14]=l=>o.model=l),options:o.options,"option-label":"categoria","option-value":"cod",label:"Seleccione categor\xEDa",dense:""},null,8,["modelValue","options"])])]),_:1}),s(p),s(c,null,{default:i(()=>[a("div",go,[s(r,{filled:"",modelValue:o.producto,"onUpdate:modelValue":e[15]||(e[15]=l=>o.producto=l),label:"Producto","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),s(p),s(c,null,{default:i(()=>[s(r,{modelValue:o.descripcion,"onUpdate:modelValue":e[16]||(e[16]=l=>o.descripcion=l),label:"Descripci\xF3n de producto",filled:"",dense:"",type:"textarea"},null,8,["modelValue"])]),_:1}),s(p),s(c,{class:"row"},{default:i(()=>[a("div",Vo,[s(k,{filled:"",modelValue:o.modeltax,"onUpdate:modelValue":e[17]||(e[17]=l=>o.modeltax=l),options:o.optionstax,"option-label":"impuesto","option-value":"cod",label:"Elija impuesto",dense:""},null,8,["modelValue","options"])]),a("div",bo,[s(k,{filled:"",modelValue:o.modelunidad,"onUpdate:modelValue":e[18]||(e[18]=l=>o.modelunidad=l),options:o.optionsunidad,"option-label":"unidad","option-value":"cod",label:"Elija unidad",dense:""},null,8,["modelValue","options"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.inventario,"onUpdate:modelValue":e[19]||(e[19]=l=>o.inventario=l),label:"Inventario","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),s(p),s(c,null,{default:i(()=>[a("div",vo,[s(r,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.costo,"onUpdate:modelValue":e[20]||(e[20]=l=>o.costo=l),label:"Costo Bs.","stack-label":"",dense:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.costousd,"onUpdate:modelValue":e[21]||(e[21]=l=>o.costousd=l),label:"Costo USD","stack-label":"",dense:""},null,8,["modelValue"])]),a("div",yo,[s(r,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.precio,"onUpdate:modelValue":e[22]||(e[22]=l=>o.precio=l),label:"Precio Bs.","stack-label":"",dense:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.preciousd,"onUpdate:modelValue":e[23]||(e[23]=l=>o.preciousd=l),label:"Precio USD","stack-label":"",dense:""},null,8,["modelValue"])]),a("div",ko,[s(r,{style:{"margin-right":"5px"},class:"col",filled:"",modelValue:o.utilidad,"onUpdate:modelValue":e[24]||(e[24]=l=>o.utilidad=l),label:"Utilidad %","stack-label":"",dense:"",readonly:""},null,8,["modelValue"]),s(r,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.inventario,"onUpdate:modelValue":e[25]||(e[25]=l=>o.inventario=l),label:"Inventario","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),s(p),s(j,{align:"right"},{default:i(()=>[U(s(g,{label:"Cancelar",color:"negative"},null,512),[[C]]),U(s(g,{label:"Aceptar",color:"secondary",onClick:o.editar},null,8,["onClick"]),[[C]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var No=N(q,[["render",Uo]]);export{No as default};
