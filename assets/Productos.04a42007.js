import{_ as z,ah as $,r as n,N as g,k as h,aj as v,t as l,m as d,q as t,z as I,y as u,B as V,l as j,av as F,aw as L,al as w,Q as B,x as p,as as c,A as N,a3 as S,ax as D,ar as b,ak as m,at as x,au as T}from"./index.ff7428e5.js";import{Q as E,C as Q}from"./ClosePopup.33959ee2.js";import{Q as C}from"./QBadge.5929b60c.js";import{Q as A,a as P}from"./QItem.f4989903.js";import{Q as y}from"./QSelect.c266bff4.js";import{Q as K}from"./QPage.5e147bb7.js";import{a as k}from"./axios.7331a07d.js";import"./format.68127358.js";const U="https://posapi-test.factura-smart.com/",q=$({name:"IndexPage",setup(){return{slide:n(2),rows:n([]),rowsproductosfiltre:n([]),textitem:n(""),sku:n(""),producto:n(""),idproducto:n(null),descripcion:n(""),costo:n(0),precio:n(0),costousd:n(0),preciousd:n(0),utilidad:n(0),inventario:n(0),buscaritem:n(!1),editaritem:n(!1),model:n(null),options:[],modeltax:n(null),optionstax:[],modelunidad:n(null),modeltipoproducto:n(null),buscadoproducto:n(!0),optionsunidad:n([]),optionstipoproducto:n([])}},methods:{listar(){this.btndisable=!1;const o=0;k.get(U+"productos/"+sessionStorage.getItem("co_empresa")+"/"+o).then(async e=>{console.log(e.data);const a=e.data.resp;this.rows=[];for(const i in a){const r={};r.cod=a[i].id,r.sku=a[i].sku,r.producto=a[i].producto,r.categoria=a[i].categoria,r.idcategoria=a[i].idcategoria,r.descripcion=a[i].descripcion,r.unidad=a[i].unidad,r.idunidad=a[i].idunidad,r.impuesto=a[i].impuesto,r.idimpuesto=a[i].idimpuesto,r.intipoproducto=a[i].intipoproducto,r.precio=a[i].precio,r.costo=a[i].costo,r.utilidad=a[i].utilidad,r.preciousd=a[i].preciousd,r.costousd=a[i].costousd,r.inventario=Number(a[i].inventario1)||0,this.rows.push(r)}this.rowsproductosfiltre=this.rows}).catch(e=>{g.create("Problemas al listar Categorias "+e)})},openEditar(o){console.log(o.intipoproducto),console.log(this.optionstipoproducto),this.editaritem=!0;const e=this.options.find(f=>f.cod===o.idcategoria);this.model=e;const a=this.optionstax.find(f=>f.cod===o.idimpuesto);this.modeltax=a;const i=this.optionsunidad.find(f=>f.cod===o.idunidad);this.modelunidad=i;const r=this.optionstipoproducto.find(f=>f.id===Number(o.intipoproducto));this.modeltipoproducto=r,console.log(r),this.sku=o.sku,this.descripcion=o.descripcion,this.idproducto=o.cod,this.producto=o.producto,this.costo=o.costo,this.inventario=o.inventario,this.precio=o.precio,this.costousd=o.costousd,this.utilidad=o.utilidad,this.preciousd=o.preciousd},openCrear(){this.limpiar(),this.buscaritem=!0},limpiar(){this.model=null,this.modeltax=null,this.modelunidad=null,this.sku="",this.descripcion="",this.producto="",this.costo=0,this.costousd=0,this.inventario="",this.precio=0,this.preciousd=0},editar(){if(this.producto.length===0||this.descripcion.length===0||this.precio.length===0||this.preciousd.length===0||this.inventario.length===0)return;const o={id:this.idproducto,idcategoria:this.model.cod,idimpuesto:this.modeltax.cod,idunidad:this.modelunidad.cod,intipoproducto:this.modelunidad.id,descripcion:this.descripcion,producto:this.producto,sku:this.sku,costo:this.costo||0,costousd:this.costousd||0,inventario:this.inventario,utilidad:this.utilidad,precio:this.precio,preciousd:this.preciousd};k.post(U+"productos/updateproductos",o).then(async e=>{this.modalcrear=!1,console.log(e.data),g.create(e.data.resp.message),this.listar()})},crear(){if(this.producto.length===0||this.descripcion.length===0||this.precio.length===0||this.preciousd.length===0||this.inventario.length===0)return;const o={idcategoria:this.model.cod,idimpuesto:this.modeltax.cod,idunidad:this.modelunidad.cod,intipoproducto:this.modeltipoproducto.id,descripcion:this.descripcion,producto:this.producto,sku:this.sku,costo:this.costo,costousd:this.costousd,preciousd:this.preciousd,inventario:this.inventario,utilidad:this.utilidad,precio:this.precio};k.post(U+"productos",o).then(async e=>{this.modalcrear=!1,g.create(e.data.message),this.listar()}).catch(e=>{g.create("Problemas al Crear Producto "+e)})},listarCategoria(){k.get(U+"categoria/"+sessionStorage.getItem("co_empresa")).then(async o=>{const e=o.data.resp;this.options=[];for(const a in e){const i={};i.cod=e[a].id,i.categoria=e[a].categoria,i.descripcion=e[a].descripcion,this.options.push(i)}}).catch(o=>{g.create("Problemas al listar Categorias "+o)})},listarImpuesto(){k.get(U+"impuestos").then(async o=>{const e=o.data.resp;this.optionstax=[];for(const a in e){const i={};i.cod=e[a].id,i.impuesto=e[a].impuesto,i.tasa=e[a].tasa,this.optionstax.push(i)}}).catch(o=>{g.create("Problemas al listar Impuestos "+o)})},listarUnidades(){k.get(U+"unidades").then(async o=>{const e=o.data.resp;this.optionsunidad=[];for(const a in e){const i={};i.cod=e[a].id,i.unidad=e[a].unidad,this.optionsunidad.push(i)}}).catch(o=>{g.create("Problemas al listar Unidades "+o)})},primeraletra(o){return o[0]},colorLetra(o){const e=o[0].charCodeAt(0);return"#"+e+"0"},async cargar(){const o=await k.get(U+"configuracion/"+sessionStorage.getItem("co_empresa")).catch(e=>{g.create("Problemas al listar Configuracion "+e)});return console.log(o),o.data.resp}},watch:{textitem(o){console.log("textitem"),console.log(o),this.buscadoproducto=!1,o.length>0?this.rowsproductosfiltre=this.rowsproductosfiltre.filter(e=>!!(e.producto.toUpperCase().includes(o.toUpperCase())||e.sku&&e.sku.includes(o))):this.rowsproductosfiltre=this.rows,this.buscadoproducto=!0},costo(){this.costo>0?(this.costousd=(this.costo/this.tasausd).toFixed(2),this.utilidad=((this.precio-this.costo)/this.costo*100).toFixed(2)):(this.costousd=0,this.utilidad=0,this.costo=0)},precio(){this.precio>0?(this.preciousd=(this.precio/this.tasausd).toFixed(2),this.costo>0&&(this.utilidad=((this.precio-this.costo)/this.costo*100).toFixed(2))):(this.preciousd=0,this.utilidad=0,this.precio=0)}},async mounted(){const o=await this.cargar();this.tasausd=o.tasabcv,this.listar(),this.listarCategoria(),this.listarImpuesto(),this.listarUnidades();let e={};e.id=1,e.tipoproducto="Simple",this.optionstipoproducto.push(e),e={},e.id=2,e.tipoproducto="Compuesto",this.optionstipoproducto.push(e)}}),H={class:"col"},O={class:"botones row",style:{background:"#ededed"}},G={class:"listarproductos row"},J={key:1,class:"puntodeventaconitem col"},M={key:0,class:"row justify-center"},R={style:{display:"flex"}},W={style:{display:"flex"}},X={style:{display:"flex"}},Y={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},Z=d("div",{class:"text-center"},"Unidad",-1),_={class:"text-secondary"},oo={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},eo=d("div",{class:"text-center"},"Impuesto.",-1),to={class:"text-secondary"},so={style:{display:"grid",width:"33%","font-size":"11px","justify-content":"center"}},lo=d("div",{class:"text-center"},"Inventario",-1),io={class:"text-center"},ao=d("div",{class:"text-h6"},"Crear producto",-1),no={class:"col",style:{padding:"0 10px"}},ro={class:"col",style:{padding:"0 10px"}},uo={class:""},po={class:"col"},co={class:"col"},mo={class:"row"},ho={class:"row"},fo={class:"row"},go=d("div",{class:"text-h6"},"Editar producto",-1),Vo={class:"col",style:{padding:"0 10px"}},bo={class:"col",style:{padding:"0 10px"}},yo={class:""},vo={class:"col"},ko={class:"col"},Uo={class:"row"},wo={class:"row"},Co={class:"row"};function So(o,e,a,i,r,f){return h(),v(K,{class:"bg-white"},{default:l(()=>[d("div",H,[d("div",O,[t(u,{color:"white","bg-color":"primary",rounded:"",standout:"",modelValue:o.textitem,"onUpdate:modelValue":e[1]||(e[1]=s=>o.textitem=s),label:"Nombre o Sku de producto",style:{margin:"5px",width:"310px"},autofocus:""},{prepend:l(()=>[t(I,{name:"search"})]),append:l(()=>[t(I,{name:"close",onClick:e[0]||(e[0]=s=>o.textitem=""),class:"cursor-pointer"})]),_:1},8,["modelValue"]),t(V,{color:"secondary",icon:"add_circle",onClick:o.openCrear,label:"Agregar producto",style:{margin:"10px"}},null,8,["onClick"])]),d("div",G,[o.slide===1?(h(),v(I,{key:0,class:"carritofondo",name:"remove_shopping_cart"})):(h(),j("div",J,[o.buscadoproducto?(h(),j("div",M,[(h(!0),j(F,null,L(o.rowsproductosfiltre,s=>(h(),v(B,{key:s,class:"my-card tarjetaitem col-md-5 col-sm-11 col-xs-11"},{default:l(()=>[t(A,{horizontal:""},{default:l(()=>[t(P,null,{default:l(()=>[t(E,null,{default:l(()=>[b(m(s.sku)+" "+m(s.producto),1)]),_:2},1024),t(E,{caption:""},{default:l(()=>[t(C,{color:s.intipoproducto==="1"?"green":"orange",style:{"margin-top":"5px","margin-right":"5px"}},{default:l(()=>[b(m(s.intipoproducto==="1"?"Simple":"Compuesto"),1)]),_:2},1032,["color"]),b(" "+m(s.categoria),1)]),_:2},1024)]),_:2},1024),t(P,{side:""},{default:l(()=>[d("div",R,[s.intipoproducto==="2"?(h(),v(V,{key:0,dense:"",color:"primary",icon:"inventory_2",style:{margin:"3px"}})):w("",!0),t(V,{dense:"",color:"primary",icon:"delete",style:{margin:"3px"}}),t(V,{dense:"",color:"primary",icon:"edit",onClick:Qo=>o.openEditar(s),style:{margin:"3px"}},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),t(A,{horizontal:""},{default:l(()=>[t(P,{avatar:"",style:{"padding-right":"15px","align-items":"center"}},{default:l(()=>[t(x,{"text-color":"white",style:T("background: "+o.colorLetra(s.producto))},{default:l(()=>[b(m(o.primeraletra(s.producto)),1)]),_:2},1032,["style"]),t(C,{color:"secondary",style:{"margin-top":"5px"}},{default:l(()=>[b(" Bs."+m(s.precio),1)]),_:2},1024)]),_:2},1024),t(P,{class:"tarjeticainside"},{default:l(()=>[d("div",W,m(s.descripcion),1),d("div",X,[d("div",Y,[Z,d("div",_,m(s.unidad),1)]),d("div",oo,[eo,d("div",to,m(s.impuesto),1)]),d("div",so,[lo,d("div",io,[s.inventario>10?(h(),v(C,{key:0,class:"estatusbien"},{default:l(()=>[b(m(s.inventario),1)]),_:2},1024)):w("",!0),s.inventario>0&&s.inventario<=10?(h(),v(C,{key:1,class:"estatusmedio"},{default:l(()=>[b(m(s.inventario),1)]),_:2},1024)):w("",!0),s.inventario===0?(h(),v(C,{key:2,class:"estatusmal"},{default:l(()=>[b(m(s.inventario),1)]),_:2},1024)):w("",!0)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):w("",!0)]))])]),t(D,{modelValue:o.buscaritem,"onUpdate:modelValue":e[15]||(e[15]=s=>o.buscaritem=s),position:"top"},{default:l(()=>[t(B,null,{default:l(()=>[t(p,null,{default:l(()=>[ao]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[t(u,{class:"col",filled:"",modelValue:o.sku,"onUpdate:modelValue":e[2]||(e[2]=s=>o.sku=s),label:"SKU","stack-label":"",dense:""},null,8,["modelValue"]),d("div",no,[t(y,{filled:"",modelValue:o.modeltipoproducto,"onUpdate:modelValue":e[3]||(e[3]=s=>o.modeltipoproducto=s),options:o.optionstipoproducto,"option-label":"tipoproducto","option-value":"id",label:"Seleccione tipo",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[d("div",ro,[t(y,{filled:"",modelValue:o.model,"onUpdate:modelValue":e[4]||(e[4]=s=>o.model=s),options:o.options,"option-label":"categoria","option-value":"cod",label:"Seleccione categor\xEDa",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,null,{default:l(()=>[d("div",uo,[t(u,{filled:"",modelValue:o.producto,"onUpdate:modelValue":e[5]||(e[5]=s=>o.producto=s),label:"Producto","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),t(c),t(p,null,{default:l(()=>[t(u,{modelValue:o.descripcion,"onUpdate:modelValue":e[6]||(e[6]=s=>o.descripcion=s),label:"Descripci\xF3n de producto",filled:"",dense:"",type:"textarea"},null,8,["modelValue"])]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[d("div",po,[t(y,{filled:"",modelValue:o.modeltax,"onUpdate:modelValue":e[7]||(e[7]=s=>o.modeltax=s),options:o.optionstax,"option-label":"impuesto","option-value":"cod",label:"Elija impuesto",dense:""},null,8,["modelValue","options"])]),d("div",co,[t(y,{filled:"",modelValue:o.modelunidad,"onUpdate:modelValue":e[8]||(e[8]=s=>o.modelunidad=s),options:o.optionsunidad,"option-label":"unidad","option-value":"cod",label:"Elija unidad",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,null,{default:l(()=>[d("div",mo,[t(u,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.costo,"onUpdate:modelValue":e[9]||(e[9]=s=>o.costo=s),label:"Costo Bs.","stack-label":"",dense:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.costousd,"onUpdate:modelValue":e[10]||(e[10]=s=>o.costousd=s),label:"Costo USD","stack-label":"",dense:""},null,8,["modelValue"])]),d("div",ho,[t(u,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.precio,"onUpdate:modelValue":e[11]||(e[11]=s=>o.precio=s),label:"Precio Bs.","stack-label":"",dense:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.preciousd,"onUpdate:modelValue":e[12]||(e[12]=s=>o.preciousd=s),label:"Precio USD","stack-label":"",dense:""},null,8,["modelValue"])]),d("div",fo,[t(u,{style:{"margin-right":"5px"},class:"col",filled:"",modelValue:o.utilidad,"onUpdate:modelValue":e[13]||(e[13]=s=>o.utilidad=s),label:"Utilidad %","stack-label":"",dense:"",readonly:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.inventario,"onUpdate:modelValue":e[14]||(e[14]=s=>o.inventario=s),label:"Inventario","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),t(c),t(N,{align:"right"},{default:l(()=>[S(t(V,{label:"Cancelar",color:"negative"},null,512),[[Q]]),S(t(V,{label:"Aceptar",color:"secondary",onClick:o.crear},null,8,["onClick"]),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(D,{modelValue:o.editaritem,"onUpdate:modelValue":e[29]||(e[29]=s=>o.editaritem=s),position:"top"},{default:l(()=>[t(B,null,{default:l(()=>[t(p,null,{default:l(()=>[go]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[t(u,{class:"col",filled:"",modelValue:o.sku,"onUpdate:modelValue":e[16]||(e[16]=s=>o.sku=s),label:"SKU","stack-label":"",dense:""},null,8,["modelValue"]),d("div",Vo,[t(y,{filled:"",disable:"",modelValue:o.modeltipoproducto,"onUpdate:modelValue":e[17]||(e[17]=s=>o.modeltipoproducto=s),options:o.optionstipoproducto,"option-label":"tipoproducto","option-value":"id",label:"Seleccione tipo",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[d("div",bo,[t(y,{filled:"",modelValue:o.model,"onUpdate:modelValue":e[18]||(e[18]=s=>o.model=s),options:o.options,"option-label":"categoria","option-value":"cod",label:"Seleccione categor\xEDa",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,null,{default:l(()=>[d("div",yo,[t(u,{filled:"",modelValue:o.producto,"onUpdate:modelValue":e[19]||(e[19]=s=>o.producto=s),label:"Producto","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),t(c),t(p,null,{default:l(()=>[t(u,{modelValue:o.descripcion,"onUpdate:modelValue":e[20]||(e[20]=s=>o.descripcion=s),label:"Descripci\xF3n de producto",filled:"",dense:"",type:"textarea"},null,8,["modelValue"])]),_:1}),t(c),t(p,{class:"row"},{default:l(()=>[d("div",vo,[t(y,{filled:"",modelValue:o.modeltax,"onUpdate:modelValue":e[21]||(e[21]=s=>o.modeltax=s),options:o.optionstax,"option-label":"impuesto","option-value":"cod",label:"Elija impuesto",dense:""},null,8,["modelValue","options"])]),d("div",ko,[t(y,{filled:"",modelValue:o.modelunidad,"onUpdate:modelValue":e[22]||(e[22]=s=>o.modelunidad=s),options:o.optionsunidad,"option-label":"unidad","option-value":"cod",label:"Elija unidad",dense:""},null,8,["modelValue","options"])])]),_:1}),t(c),t(p,null,{default:l(()=>[d("div",Uo,[t(u,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.costo,"onUpdate:modelValue":e[23]||(e[23]=s=>o.costo=s),label:"Costo Bs.","stack-label":"",dense:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.costousd,"onUpdate:modelValue":e[24]||(e[24]=s=>o.costousd=s),label:"Costo USD","stack-label":"",dense:""},null,8,["modelValue"])]),d("div",wo,[t(u,{style:{"margin-right":"5px"},type:"number",min:"0",class:"col",filled:"",modelValue:o.precio,"onUpdate:modelValue":e[25]||(e[25]=s=>o.precio=s),label:"Precio Bs.","stack-label":"",dense:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.preciousd,"onUpdate:modelValue":e[26]||(e[26]=s=>o.preciousd=s),label:"Precio USD","stack-label":"",dense:""},null,8,["modelValue"])]),d("div",Co,[t(u,{style:{"margin-right":"5px"},class:"col",filled:"",modelValue:o.utilidad,"onUpdate:modelValue":e[27]||(e[27]=s=>o.utilidad=s),label:"Utilidad %","stack-label":"",dense:"",readonly:""},null,8,["modelValue"]),t(u,{style:{"margin-left":"5px"},class:"col",filled:"",modelValue:o.inventario,"onUpdate:modelValue":e[28]||(e[28]=s=>o.inventario=s),label:"Inventario","stack-label":"",dense:""},null,8,["modelValue"])])]),_:1}),t(c),t(N,{align:"right"},{default:l(()=>[S(t(V,{label:"Cancelar",color:"negative"},null,512),[[Q]]),S(t(V,{label:"Aceptar",color:"secondary",onClick:o.editar},null,8,["onClick"]),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var zo=z(q,[["render",So]]);export{zo as default};
