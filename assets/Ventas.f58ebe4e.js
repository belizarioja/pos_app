import{_ as y,a9 as b,r,N as f,k as c,l as v,w as d,q as t,m as n,z as w,y as C,B as u,F as I,ab as o,t as x,Q as T,x as V,C as m,au as h,ac as Q,aw as k,av as B,A as P,a6 as F,ax as D}from"./index.fef160fa.js";import{Q as N}from"./QBadge.2e26ae86.js";import{Q as g,a as S}from"./QTable.3e1a3715.js";import{Q as A}from"./QPage.60836d02.js";import{C as $}from"./ClosePopup.8351a24f.js";import{h as j}from"./moment.40bc58bf.js";import{a as _}from"./axios.7331a07d.js";import"./format.b90bddac.js";import"./QSelect.5c5a6082.js";import"./QItem.b105b6c7.js";const p="https://posapi-test.factura-smart.com/",q=b({name:"IndexPage",setup(){return{modaldetalleinvoice:r(!1),rows:r([]),ventas:r([]),cols:[{name:"tipofactura",align:"center",label:"\u{1F4C3} Tipo Documento",field:"tipofactura"},{name:"numerointerno",align:"center",label:"\u{1F522} N\xB0 Interno",field:"numerointerno"},{name:"numerocontrol",align:"center",label:"\u{1F50D} # Control",field:"numerocontrol"},{name:"fecha",align:"center",label:"\u{1F4C5} Fecha",field:"fecha"},{name:"cliente",align:"left",label:"\u{1F468}\u200D\u{1F4BC} Cliente",field:"cliente"},{name:"documento",align:"left",label:"\u{1F194} Identificaci\xF3n",field:"documento"},{name:"usuario",align:"left",label:"\u{1F464} Usuario",field:"usuario"},{name:"subtotal",align:"left",label:"\u{1F4B2} Subtotal",field:"subtotal"},{name:"impuesto",align:"left",label:"\u{1F3DB} Impuesto",field:"impuesto"},{name:"total",align:"center",label:"\u{1F4B5} Total",field:"total"},{name:"estatus",align:"center",label:"\u{1F504} Estatus",field:"estatus"},{name:"accion",align:"left",label:"\u{1F527} Accion",field:"accion"}],filterTable:r(""),empresa:r(""),direccion:r(""),rif:r(""),telefono:r(""),email:r(""),buscaritem:r(!1),detalleventa:r({}),loading:r(!1),id_usuario:r(sessionStorage.getItem("id_usuario")),co_rol:r(sessionStorage.getItem("co_rol")),pagination:{page:1,rowsPerPage:20}}},methods:{imprimir(){window.frames.print_frame.document.body.innerHTML=document.getElementById("areaImprimir").innerHTML,window.frames.print_frame.window.focus(),window.frames.print_frame.window.print(),this.modaldetalleinvoice=!1},async abrirDetalleInvoive(e){console.log(e),this.detalleventa=e,await _.get(p+"ventas/getitemsventas/"+e.cod).then(async a=>{this.ventas=a.data.resp;for(const s in this.holds){const l=this.ventas[s];this.ventas.push(l)}}).catch(a=>{f.create("Problemas al listar items Ventas "+a)}),this.modaldetalleinvoice=!0},listar(){this.btndisable=!1,_.get(p+"ventas/getventas/"+sessionStorage.getItem("co_empresa")).then(async e=>{console.log(e.data);const a=e.data.resp;this.rows=[];for(const s in a){const l={};l.cod=a[s].id,l.numerointerno=a[s].numerointerno,l.numerocontrol=a[s].numerocontrol,l.fecha=j(a[s].fecha).format("DD/MM/YYYY HH:mm:ss"),l.subtotal=a[s].subtotal?a[s].subtotal.toFixed(2):"0.00",l.impuesto=a[s].impuesto?a[s].impuesto.toFixed(2):"0.00",l.total=a[s].total?a[s].total.toFixed(2):"0.00",l.totalusd=a[s].totalusd?a[s].totalusd.toFixed(2):"0.00",l.igtf=a[s].igtf?a[s].igtf.toFixed(2):"0.00",l.descuentos=a[s].descuentos,l.usuario=a[s].usuario,l.documentosolo=a[s].documento,l.documento=a[s].abrev+"-"+a[s].documento,l.cliente=a[s].nombrecliente,l.abrev=a[s].abrev,l.tipofactura=a[s].tipofactura,l.estatus=a[s].estatus,this.co_rol==="3"?a[s].idusuario===this.id_usuario&&this.rows.push(l):this.rows.push(l)}console.log(this.rows)}).catch(e=>{f.create("Problemas al listar Ventas "+e)})},async cargar(){const a=(await _.get(p+"configuracion/"+sessionStorage.getItem("co_empresa")).catch(s=>{f.create("Problemas al listar Configuracion "+s)})).data.resp;this.empresa=a.empresa,this.rif=a.rif,this.direccion=a.direccion,this.telefono=a.telefono,this.email=a.email}},mounted(){console.log("Listar ventas"),this.cargar(),this.listar()}}),H={class:"col"},L=t("div",{class:"botones row fondo-gris shadow-up-9"},[t("h6",{class:"p-2"},"Reporte de Ventas")],-1),M={class:"listarcategorias row",style:{"margin-top":"20px"}},z={class:"row"},E={class:"col"},U={class:"row justify-center"},Y={style:{display:"inline"}},R={class:"text-center"},G={align:"center"},O={id:"areaImprimir",style:{width:"100%"}},J={class:"text-center letratotalesfactura",style:{}},K={class:"text-center letratotalesfactura",style:{}},W={class:"text-center letratotalesfactura",style:{}},X={class:"text-center letratotalesfactura",style:{}},Z={key:0,class:"anulada",style:{display:"flex","justify-content":"center","align-items":"center",width:"100%"}},tt={style:{display:"flex","align-items":"left",width:"100%"}},et={class:"numero",style:{"margin-left":"10px"}},at={class:"numero",style:{"margin-left":"10px"}},st={style:{display:"flex","align-items":"center"}},ot=t("div",{class:"control",style:{"margin-left":"10px"}}," N\xB0 de control:",-1),lt={class:"control",style:{"margin-left":"10px"}},it={style:{width:"100%"}},nt={class:"letratotalesfactura"},rt=t("td",{style:{width:"30%"}},"Raz\xF3n social:",-1),dt={style:{"font-weight":"bold"}},ct={class:"letratotalesfactura"},ut={style:{"font-weight":"bold"}},mt={class:"letratotalesfactura"},ft=t("td",null,"Fecha:",-1),ht={style:{"font-weight":"bold"}},_t={class:"letratotalesfactura"},pt=t("td",null,"Cajero:",-1),gt={style:{"font-weight":"bold"}},yt={style:{width:"100%"}},bt=t("tr",{style:{"font-weight":"bold","font-size":"11px"}},[t("td",{class:"rayafactura rayaarriba"},"Producto"),t("td",{class:"rayafactura rayaarriba"},"Precio"),t("td",{class:"rayafactura rayaarriba"},"Cant."),t("td",{class:"rayafactura rayaarriba"},"Imp %"),t("td",{class:"rayafactura rayaarriba"},"Total")],-1),vt={style:{width:"140px","font-style":"italic"}},wt={style:{"text-align":"right"}},Ct=t("tr",null,[t("td",{class:"rayafactura"}),t("td",{class:"rayafactura"}),t("td",{class:"rayafactura"}),t("td",{class:"rayafactura"}),t("td",{class:"rayafactura"})],-1),It={style:{width:"100%"}},xt={class:"letratotalesfactura"},Tt=t("td",{style:{width:"40%"}},null,-1),Vt=t("td",null,"Subtotal Bs.:",-1),Qt={style:{"text-align":"right"}},kt={class:"letratotalesfactura"},Bt=t("td",null,null,-1),Pt=t("td",null,"Impuestos Bs.:",-1),Ft={style:{"text-align":"right"}},Dt={class:"letratotalesfactura"},Nt=t("td",null,null,-1),St=t("td",null,"Descuentos Bs.:",-1),At={style:{"text-align":"right"}},$t={class:"letratotalesfactura"},jt=t("td",null,null,-1),qt=t("td",{class:"rayafactura"},"IGTF 3% Bs.:",-1),Ht={class:"rayafactura",style:{"text-align":"right"}},Lt={class:"letratotalesfactura",style:{"font-weight":"bold"}},Mt=t("td",null,null,-1),zt=t("td",null,"Total Bs.:",-1),Et={style:{"text-align":"right"}},Ut={class:"letratotalesfactura",style:{"font-weight":"bold"}},Yt=t("td",null,null,-1),Rt=t("td",null,"Total $:",-1),Gt={style:{"text-align":"right"}},Ot=t("iframe",{name:"print_frame",width:"0",height:"0",frameborder:"0",src:"about:blank"},null,-1);function Jt(e,a,s,l,Kt,Wt){return c(),v(A,{class:"row"},{default:d(()=>[t("div",H,[L,t("div",M,[n(C,{color:"blue-grey-3","bg-color":"white",outlined:"",standout:"","bottom-slots":"",dense:"",debounce:"500",modelValue:e.filterTable,"onUpdate:modelValue":a[0]||(a[0]=i=>e.filterTable=i),placeholder:"Buscar",style:{width:"30%"}},{append:d(()=>[n(w,{name:"search"})]),_:1},8,["modelValue"])]),t("div",z,[t("div",E,[t("div",U,[n(S,{rows:e.rows,title:"Ventas",columns:e.cols,"row-key":"num",pagination:e.pagination,style:{width:"95%",margin:"20px"},loading:e.loading,filter:e.filterTable,"no-data-label":"\u26A0 Sin registros ","wrap-cells":"",separator:"cell",class:"custom-shadow custom-border-radius-table"},{"top-right":d(()=>[t("div",Y,[n(u,{"icon-right":"filter_list",class:"q-ml-sm col-md-4 col-sm-3 col-xs-3",unelevated:"",rounded:"",color:"orange-1","text-color":"orange-10",label:"Filtrar",onClick:a[1]||(a[1]=i=>e.drawerFilters=!0)})])]),"body-cell-estatus":d(i=>[n(g,{props:i},{default:d(()=>[t("div",R,[n(N,{color:i.row.estatus==="1"?"green-1":"red-1","text-color":i.row.estatus==="1"?"green-9":"red-9",class:"q-mt-xs q-mr-xs q-pa-xs",rounded:""},{default:d(()=>[I(o(i.row.estatus==="1"?"Procesada":"Anulada"),1)]),_:2},1032,["color","text-color"])])]),_:2},1032,["props"])]),"body-cell-accion":d(i=>[n(g,{props:i},{default:d(()=>[t("div",G,[n(u,{round:"",unelevated:"",color:"orange-1","text-color":"orange-10",icon:"plagiarism",onClick:x(Xt=>e.abrirDetalleInvoive(i.row),["stop"])},null,8,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","loading","filter"])])])])]),n(D,{modelValue:e.modaldetalleinvoice,"onUpdate:modelValue":a[2]||(a[2]=i=>e.modaldetalleinvoice=i),persistent:""},{default:d(()=>[n(T,{style:{width:"320px"}},{default:d(()=>[t("div",O,[n(V,{style:{"justify-content":"center"}},{default:d(()=>[t("div",J,o(e.empresa)+" - "+o(e.rif),1),t("div",K,o(e.direccion),1),t("div",W,o(e.telefono),1),t("div",X,o(e.email),1),n(m,{style:{margin:"10px 0px"}}),e.detalleventa.estatus==="2"?(c(),h("div",Z,"ANULADA")):Q("",!0),t("div",tt,[t("div",et,o(e.detalleventa.tipofactura),1),t("div",at,o(e.detalleventa.numerointerno),1)]),t("div",st,[ot,t("div",lt,o(e.detalleventa.numerocontrol),1)]),n(m,{style:{margin:"10px 0px"}}),t("table",it,[t("tr",nt,[rt,t("td",dt,o(e.detalleventa.cliente),1)]),t("tr",ct,[t("td",null,o(e.detalleventa.abrev),1),t("td",ut,o(e.detalleventa.documentosolo),1)]),t("tr",mt,[ft,t("td",ht,o(e.detalleventa.fecha),1)]),t("tr",_t,[pt,t("td",gt,o(e.detalleventa.usuario),1)])]),t("table",yt,[bt,(c(!0),h(B,null,k(e.ventas,i=>(c(),h("tr",{key:i,style:{"font-size":"11px"}},[t("td",vt,o(i.producto),1),t("td",null,o(i.precio),1),t("td",null,o(i.cantidad),1),t("td",null,o(i.tasa)+"%",1),t("td",wt,o(i.subtotal),1)]))),128)),Ct]),t("table",It,[t("tr",xt,[Tt,Vt,t("td",Qt,o(e.detalleventa.subtotal),1)]),t("tr",kt,[Bt,Pt,t("td",Ft,o(e.detalleventa.impuesto),1)]),t("tr",Dt,[Nt,St,t("td",At,o(e.detalleventa.descuentos),1)]),t("tr",$t,[jt,qt,t("td",Ht,o(e.detalleventa.igtf),1)]),t("tr",Lt,[Mt,zt,t("td",Et,o(e.detalleventa.total),1)]),t("tr",Ut,[Yt,Rt,t("td",Gt,o(e.detalleventa.totalusd),1)])])]),_:1}),n(m)]),Ot,n(m),n(P,{align:"center"},{default:d(()=>[F(n(u,{outline:"","no-caps":"",label:"Cancelar","icon-right":"close",color:"primary"},null,512),[[$]]),n(u,{unelevated:"","no-caps":"",label:"Imprimir",color:"primary","icon-right":"print",onClick:e.imprimir},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var de=y(q,[["render",Jt]]);export{de as default};
