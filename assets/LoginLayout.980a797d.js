import{c as B,r as F,p as P,o as A,a as N,d as T,h as i,e as M,g as L,v as j,s as V,n as R,f as U,i as z,u as D,j as O,_ as H,N as y,k as K,l as Y,m,w as G,q as l,t as f,Q as J,x as W,y as E,z as Q,A as X,B as Z}from"./index.e3a55ec6.js";import{a as $}from"./axios.7331a07d.js";var ee=B({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:r,emit:p}){const h=L(),s=F(null);let u=0;const o=[];function b(e){const d=typeof e=="boolean"?e:t.noErrorFocus!==!0,g=++u,w=(a,n)=>{p("validation"+(a===!0?"Success":"Error"),n)},I=a=>{const n=a.validate();return typeof n.then=="function"?n.then(c=>({valid:c,comp:a}),c=>({valid:!1,comp:a,err:c})):Promise.resolve({valid:n,comp:a})};return(t.greedy===!0?Promise.all(o.map(I)).then(a=>a.filter(n=>n.valid!==!0)):o.reduce((a,n)=>a.then(()=>I(n).then(c=>{if(c.valid===!1)return Promise.reject(c)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return g===u&&w(!0),!0;if(g===u){const{comp:n,err:c}=a[0];if(c!==void 0&&console.error(c),w(!1,n),d===!0){const q=a.find(({comp:k})=>typeof k.focus=="function"&&j(k.$)===!1);q!==void 0&&q.comp.focus()}}return!1})}function _(){u++,o.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&V(e);const d=u+1;b().then(g=>{d===u&&g===!0&&(t.onSubmit!==void 0?p("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function C(e){e!==void 0&&V(e),p("reset"),R(()=>{_(),t.autofocus===!0&&t.noResetFocus!==!0&&v()})}function v(){U(()=>{if(s.value===null)return;const e=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),d=>d.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}P(z,{bindComponent(e){o.push(e)},unbindComponent(e){const d=o.indexOf(e);d>-1&&o.splice(d,1)}});let S=!1;return A(()=>{S=!0}),N(()=>{S===!0&&t.autofocus===!0&&v()}),T(()=>{t.autofocus===!0&&v()}),Object.assign(h.proxy,{validate:b,resetValidation:_,submit:x,reset:C,focus:v,getValidationComponents:()=>o}),()=>i("form",{class:"q-form",ref:s,onSubmit:x,onReset:C},M(r.default))}});const te=[i("g",{transform:"translate(20 50)"},[i("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.6"},[i("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),i("g",{transform:"translate(50 50)"},[i("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.8"},[i("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),i("g",{transform:"translate(80 50)"},[i("rect",{x:"-10",y:"-30",width:" 20",height:"60",fill:"currentColor",opacity:"0.9"},[i("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var ae=B({name:"QSpinnerFacebook",props:D,setup(t){const{cSize:r,classes:p}=O(t);return()=>i("svg",{class:p.value,width:r.value,height:r.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},te)}});const oe="https://posapi-test.factura-smart.com/",se={name:"LoginLayout",data(){return{term:"",usuarioCentro:"",claveCentro:"",loading:!1}},methods:{submit(){this.usuarioCentro===""?y.create("El Usuario es requerido para iniciar sesi\xF3n"):this.claveCentro===""?y.create("La contrase\xF1a es requerida para iniciar sesi\xF3n"):(this.loading=!0,$.post(oe+"usuario/login",{usuario:this.usuarioCentro,clave:this.claveCentro}).then(async t=>{this.loading=!1,t.status===200?(sessionStorage.setItem("id_usuario",t.data.resp.id),sessionStorage.setItem("tx_nombre",t.data.resp.nombre),sessionStorage.setItem("tx_empresa",t.data.resp.empresa),sessionStorage.setItem("co_empresa",t.data.resp.idempresa),sessionStorage.setItem("tx_rol",t.data.resp.rol),sessionStorage.setItem("co_rol",t.data.resp.idrol),this.$router.push("/puntodeventa")):(this.loading=!1,y.create(t.data.message))}).catch(t=>{this.loading=!1,y.create("Error "+t)}))}},mounted(){console.log("Modo producci\xF3n")}},re={class:"",style:{display:"grid"}},ne={style:{display:"grid","justify-content":"center","text-align":"center"}},ie=m("div",{class:"text-center"},[m("img",{src:"login_sid.png",style:{"margin-top":"20px"}})],-1),le=m("h5",{class:"text-h5 text-primary q-my-md"},"Identificarse",-1),ue={class:"formulario"},ce=m("div",{class:"bg-primary fondoabajo"},null,-1);function de(t,r,p,h,s,u){return K(),Y("div",re,[m("div",ne,[ie,le,m("div",ue,[m("form",{onSubmit:r[2]||(r[2]=G((...o)=>u.submit&&u.submit(...o),["prevent"])),class:""},[l(J,{bordered:"",class:"q-pa-lg shadow-1",style:{"border-radius":"10px",border:"1px solid #ccc"}},{default:f(()=>[l(W,null,{default:f(()=>[l(ee,{class:"q-gutter-md"},{default:f(()=>[l(E,{square:"",filled:"",clearable:"",modelValue:s.usuarioCentro,"onUpdate:modelValue":r[0]||(r[0]=o=>s.usuarioCentro=o),type:"text",label:"Usuario"},{prepend:f(()=>[l(Q,{name:"account_circle"})]),_:1},8,["modelValue"]),l(E,{square:"",filled:"",clearable:"",modelValue:s.claveCentro,"onUpdate:modelValue":r[1]||(r[1]=o=>s.claveCentro=o),type:"password",label:"Clave"},{prepend:f(()=>[l(Q,{name:"lock"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(X,{class:"q-px-md"},{default:f(()=>[l(Z,{unelevated:"",color:"primary",type:"submit",loading:s.loading,size:"lg",class:"full-width",label:"Ingresar"},{loading:f(()=>[l(ae)]),_:1},8,["loading"])]),_:1})]),_:1})],32)])]),ce])}var ve=H(se,[["render",de]]);export{ve as default};
